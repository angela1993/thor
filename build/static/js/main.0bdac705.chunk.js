(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{142:function(a,e,t){},176:function(a,e,t){a.exports=t(272)},181:function(a,e,t){},182:function(a,e,t){},184:function(a,e,t){},201:function(a,e,t){},202:function(a,e,t){},203:function(a,e,t){},268:function(a,e,t){},269:function(a,e,t){},270:function(a,e,t){},271:function(a,e,t){},272:function(a,e,t){"use strict";t.r(e);var n=t(0),i=t.n(n),r=t(21),o=t.n(r),s=(t(181),t(8)),l=t(9),c=t(12),d=t(10),u=t(11),m=t(1),h=(t(182),t(19)),p=t(173),j=t(35),k=(t(98),t(14)),v=t(162),b=t.n(v),g=t(17),E=function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).state={rating:1,obradjen:!1,spinnerActive:!1,idDogadjaja:a.idDogadjaja},t.obradiOcenjivanje=t.obradiOcenjivanje.bind(Object(m.a)(Object(m.a)(t))),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"onStarClick",value:function(a,e,t){this.setState({rating:a})}},{key:"obradiOcenjivanje",value:function(a){var e=this;a.target.disabled=!0,this.setState({spinnerActive:!0});var t=new FormData;t.append("idDogadjaja",this.state.idDogadjaja),t.append("ocena",this.state.rating),fetch("./ThOr_php/oceniDogadjaj.php",{method:"POST",body:t}).then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(a){a.NovaOcena?(e.props.promeniOcenu(a.NovaOcena),e.setState({obradjen:!0,spinnerActive:!1})):(alert(a.Greska),e.props.logOut())}).catch(function(a){return console.log(a)})}},{key:"render",value:function(){var a=this,e=this.state.rating;return i.a.createElement("div",{className:"divRatingComponent"},i.a.createElement(b.a,{name:"rate1",starCount:5,value:e,onStarClick:this.onStarClick.bind(this),renderStarIcon:function(){return i.a.createElement("i",{class:"fas fa-star"})}}),i.a.createElement(k.a,{className:"OceniButton",variant:"outline-dark",onClick:this.obradiOcenjivanje},!1===a.state.obradjen&&!1===a.state.spinnerActive?i.a.createElement(i.a.Fragment,null,"Ok"):!1===a.state.obradjen&&!0===a.state.spinnerActive?i.a.createElement(g.a,{className:"spiner_zakazivanje",animation:"grow",variant:"dark",size:"sm"}):!0===a.state.obradjen?i.a.createElement("i",{className:"fas fa-check"}):void 0))}}]),e}(i.a.Component),f=(t(184),function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).state={spinerActive:!1,stiklica:!1,idDogadjaja:a.idDogadjaja},t.handleClickSediste=t.handleClickSediste.bind(Object(m.a)(Object(m.a)(t))),t.handleCLickZakazi=t.handleCLickZakazi.bind(Object(m.a)(Object(m.a)(t))),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"componentDidUpdate",value:function(a){this.props.zauzetaSedista!==a.zauzetaSedista&&this.obojiZazuzetaSedista()}},{key:"componentDidMount",value:function(){this.obojiZazuzetaSedista()}},{key:"PodeliNaBrojKolona",value:function(){var a=[],e=1,t=0,n=[],i=!0,r=!1,o=void 0;try{for(var s,l=this.props.rasporedSedista[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;if(","===c){for(var d=n.length-1;d>=0;d--)t+=n[d]*e,e*=10;n=[],a.push(t),e=1,t=0}else n.push(c)}}catch(u){r=!0,o=u}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}return a}},{key:"handleClickSediste",value:function(a){if("I"===a.target.nodeName){var e=document.querySelector("button[value='"+a.target.parentElement.value+"']");"red"!==e.style.backgroundColor&&(e.style.backgroundColor="#045FB4")}else{var t=document.querySelector("button[value='"+a.target.value+"']");"red"!==t.style.backgroundColor&&(t.style.backgroundColor="#045FB4")}}},{key:"handleCLickZakazi",value:function(a){var e=this;this.setState({spinerActive:!0});var t=document.querySelectorAll(".btnSediste"),n=[];t.forEach(function(a){"rgb(4, 95, 180)"===a.style.backgroundColor&&n.push(a)});var i=[];n.forEach(function(a){for(var t=a.value.split("."),n=e.props.rasporedSedista.split(","),r=0,o=0;o<t[0];o++)r+=parseInt(n[o]);r+=parseInt(t[1]),i.push(r)});var r=[];n.forEach(function(a){r.push(a.value)});var o,s=r.join(","),l=i.join(","),c=new FormData;c.append("string_zauzetih_indeksa",l),c.append("idDogadjaja",this.state.idDogadjaja),fetch("./ThOr_php/zakaziMesta.php",{method:"POST",body:c}).then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(a){if("NEMA"!==a.Greska)return alert(a.Greska),void e.props.logOut();o=a.Ret}).catch(function(a){return console.log(a)});var d=new FormData;d.append("string_mesta",s),d.append("idDogadjaja",this.state.idDogadjaja),d.append("naslov",this.props.naslov),d.append("datum",this.props.datum),d.append("vreme",this.props.vreme),fetch("./ThOr_php/upisiRezervaciju.php",{method:"POST",body:d}).then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(a){if("NEMA"!==a.Greska)return alert(a.Greska),void e.props.logOut();e.props.izvrsenaZamena(o),e.setState({spinerActive:!1,stiklica:!0})}).catch(function(a){return console.log(a)})}},{key:"IscrtajSedista",value:function(){var a=this,e=this.PodeliNaBrojKolona(),t=0;return e.map(function(e){for(var n=[],r=0;r<e;r++){var o=t+"."+r;n.push(i.a.createElement(k.a,{variant:"info",className:"btnSediste",key:o,value:o,onClick:a.handleClickSediste},i.a.createElement("i",{className:"fas fa-chair",size:"0.5x"})))}return t+=1,i.a.createElement("div",{className:"jednaVrsta",key:t},n)})}},{key:"obojiZazuzetaSedista",value:function(){var a=this.PodeliNaBrojKolona(),e=0,t=a[e],n=0,i=0;if(null!==this.props.zauzetaSedista){var r=!0,o=!1,s=void 0;try{for(var l,c=this.props.zauzetaSedista[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var d=l.value;if(n<t){if("1"===d)document.querySelector("button[value='"+e+"."+i+"']").style.backgroundColor="red";n++,i++}else{if(t+=a[++e],i=0,n<t)if("1"===d)document.querySelector("button[value='"+e+"."+i+"']").style.backgroundColor="red";n++,i++}}}catch(u){o=!0,s=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw s}}}}},{key:"renderSpinner",value:function(){return i.a.createElement(g.a,{size:"sm",role:"status",animation:"grow",variant:"success"})}},{key:"render",value:function(){return i.a.createElement("div",{className:"divZakazivanje"},i.a.createElement("div",{className:"divSedista"},this.IscrtajSedista()),i.a.createElement("div",{className:"kontroleZakazi"},i.a.createElement("div",{className:"btnZakazi"},i.a.createElement(k.a,{className:"btnZakazi",variant:"outline-success",onClick:this.handleCLickZakazi},"Zaka\u017ei mesta",this.state.spinerActive&&this.renderSpinner())),i.a.createElement("div",{className:"InvisibleSpiner"}),this.state.stiklica&&i.a.createElement(k.a,{variant:"success"}," ",i.a.createElement("i",{className:"fas fa-check-circle"})," ")))}}]),e}(i.a.Component)),O=t(45),S=t(84),z=t(125),y=t(40),w=t(174),C=t(49),D=function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).state={guest:a.guest,administrator:a.administrator,username:a.username,id:a.id,date:a.date,message:a.message,picture:a.picture},t.IzbrisiHandler=t.IzbrisiHandler.bind(Object(m.a)(Object(m.a)(t))),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"IzbrisiHandler",value:function(a){var e,t=this;e="I"===a.target.nodeName?a.target.parentElement.value:a.target.value;var n=new FormData;n.append("id",e),fetch("./ThOr_php/izbrisiKomentar.php",{method:"POST",body:n}).then(function(a){if(a.ok)return t.props.izbrisanKomentar(e),a.json();throw new Error("fetch greska")}).then(function(a){console.log(a)}).catch(function(a){return console.log(a)})}},{key:"render",value:function(){return i.a.createElement("div",{className:"komentar"},i.a.createElement(S.a,{className:"komentar-slika",src:"https://images.unsplash.com/photo-1536164261511-3a17e671d380?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=330&q=80",alt:"profile",roundedCircle:!0}),i.a.createElement("div",{className:"komentar-telo"},i.a.createElement("div",{className:"well well-lg"},i.a.createElement("div",{className:"komentar-header"},i.a.createElement("div",{className:"komentar-korisnik"},this.state.username," "),i.a.createElement("div",{className:"komentar-datum"},this.state.date)),i.a.createElement("p",{className:"komentar-tekst"},this.state.message)),i.a.createElement("div",{className:"samoZaDugme"},this.state.administrator&&i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{overlay:i.a.createElement(C.a,{id:"tooltip-disabled"},"Obrisi komentar")},i.a.createElement(k.a,{className:"btnIzbrisi",variant:"outline-danger",value:this.state.id,onClick:this.IzbrisiHandler},i.a.createElement("i",{className:"fas fa-times"})))))))}}]),e}(i.a.Component),N=t(175),P=t(124),I=t(2),K=function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).state={loader:!1},t.otkazi=t.otkazi.bind(Object(m.a)(Object(m.a)(t))),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"otkazi",value:function(){var a,e=this;this.setState({loader:!0});var t=new FormData;t.append("idDogadjaja",this.props.idDogadjaja),1==this.props.aktivan?(t.append("Aktivan",0),a=0):(a=1,t.append("Aktivan",1)),fetch("./ThOr_php/aktivnostDogadjaja.php",{method:"POST",body:t}).then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(t){"NEMA"===t.Greska?(e.props.promeniAktivnost(a),e.setState({loader:!1})):(e.props.logOut(),alert(t.Greska))}).catch(function(a){return console.log(a)})}},{key:"render",value:function(){return console.log("otkazivanje:"+this.props.aktivan),i.a.createElement("div",{className:"Otkazivanje"},new Date(this.props.datum)>new Date===!0?i.a.createElement(i.a.Fragment,null,!0===this.state.loader?i.a.createElement(i.a.Fragment,null," ",i.a.createElement(g.a,{animation:"border",variant:"primary"})):i.a.createElement(k.a,{variant:"outline-dark",type:"button",onClick:this.otkazi},1==this.props.aktivan?i.a.createElement(i.a.Fragment,null,"Otkazi"):i.a.createElement(i.a.Fragment,null,"Postavi Na Aktivan"))):i.a.createElement(i.a.Fragment,null))}}]),e}(i.a.Component),F=function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).state={key:"komentari",guest:t.props.guest,administrator:t.props.administrator,idDogadjaja:t.props.idDogadjaja,slika:t.props.slika,naslov:t.props.naslov,opis:t.props.opis,datum:t.props.datum,duzina_trajanja:t.props.duzina_trajanja,cena:t.props.cena,aktivan:t.props.aktivan,ocena_dogadjaja:Number.parseFloat(t.props.ocena_dogadjaja).toFixed(1),vreme_odrzavanja:t.props.vreme_odrzavanja,korisnikovKomentar:" ",open:!1,show:!1,openKomentari:!1,konf_sedista:"",zauzeta_sedista:"",upisanKomentar:!1,spinnerDodajemKomentar:!1,informacijeOkomentarima:[]},t.Sadrzaj=t.Sadrzaj.bind(Object(m.a)(Object(m.a)(t))),t.handleZakazi=t.handleZakazi.bind(Object(m.a)(Object(m.a)(t))),t.handleShow=t.handleShow.bind(Object(m.a)(Object(m.a)(t))),t.handleHide=t.handleHide.bind(Object(m.a)(Object(m.a)(t))),t.handleKomentari=t.handleKomentari.bind(Object(m.a)(Object(m.a)(t))),t.nacrtaj_zakazivanje=t.nacrtaj_zakazivanje.bind(Object(m.a)(Object(m.a)(t))),t.KomentarOnChageHandler=t.KomentarOnChageHandler.bind(Object(m.a)(Object(m.a)(t))),t.unesiKomentarHandler=t.unesiKomentarHandler.bind(Object(m.a)(Object(m.a)(t))),t.promeniZauzetaMesta=t.promeniZauzetaMesta.bind(Object(m.a)(Object(m.a)(t))),t.promeniOcenu=t.promeniOcenu.bind(Object(m.a)(Object(m.a)(t))),t.vratiKomentare=t.vratiKomentare.bind(Object(m.a)(Object(m.a)(t))),t.izbrisanKomentar=t.izbrisanKomentar.bind(Object(m.a)(Object(m.a)(t))),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"vratiKomentare",value:function(){var a=this,e=new FormData;e.append("idDogadjaja",this.state.idDogadjaja),fetch("./ThOr_php/vratiKomentare.php",{method:"POST",body:e}).then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(e){"NEMA"===e.Greska?a.setState({informacijeOkomentarima:e.Informacije,UcitaniKomentari:!0},function(){return a.setState({key:"komentari"})}):a.props.logOut()}).catch(function(a){return console.log(a)})}},{key:"promeniZauzetaMesta",value:function(a){this.setState({zauzeta_sedista:a})}},{key:"izbrisanKomentar",value:function(a){var e=this.state.informacijeOkomentarima,t=e.findIndex(function(e){return e.id===a});-1!==t&&e.splice(t,1),this.setState({informacijeOkomentarima:e})}},{key:"promeniOcenu",value:function(a){this.setState({ocena_dogadjaja:Number.parseFloat(a).toFixed(1)})}},{key:"componentDidUpdate",value:function(a){this.props.guest!==a.guest&&this.setState({guest:this.props.guest}),this.props.administrator!==a.administrator&&this.setState({administrator:this.props.administrator})}},{key:"componentDidMount",value:function(){var a=this;fetch("./ThOr_php/vratiDogadjaje.php").then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(e){e.forEach(function(e){if(e.id===a.state.idDogadjaja){var t=e.idIzabraneSale;fetch("./ThOr_php/vratiSale.php").then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(e){e.forEach(function(e){if(e.id===t){var n=e.konfiguracija_mesta,i=new FormData;i.append("idDogadjaja",a.state.idDogadjaja),fetch("./ThOr_php/vratiZauzetaMesta.php",{method:"POST",body:i}).then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(e){a.setState({konf_sedista:n,zauzeta_sedista:e,ucitanaSedista:!0})}).catch(function(a){return console.log(a)})}})}).catch(function(a){return console.log(a)})}})}).catch(function(a){return console.log(a)}),this.vratiKomentare()}},{key:"vratiMesec",value:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"][new Date(this.state.datum).getMonth()]}},{key:"vratiDan",value:function(){return new Date(this.state.datum).getDate()}},{key:"Sadrzaj",value:function(){return i.a.createElement("div",{className:"extendedDogadjaj"},i.a.createElement("div",{className:"ExtendedSadrzaj"},i.a.createElement("div",{className:"SadrzajOpis"},i.a.createElement("div",{className:"extendedHeader"},i.a.createElement("h3",{className:"DogadjajNaslov"},this.state.naslov),i.a.createElement("div",{className:"dogadjajTrajanje"},this.state.duzina_trajanja)),i.a.createElement("div",{className:"linija"}),this.state.opis),i.a.createElement("div",{className:"SadrzajBar"},i.a.createElement("div",{className:"gornjiDeo"},i.a.createElement(S.a,{className:"ExtendedSlika",src:this.state.slika,fluid:!0})),i.a.createElement("div",{className:"sadrzajOcena"},i.a.createElement("div",{className:"postojecaOcena"},this.state.ocena_dogadjaja,"/5  ",i.a.createElement("i",{className:"fas fa-star"})),!0!==this.props.tabela?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"crticaOcena"}),i.a.createElement("div",{className:"novaOcena"},i.a.createElement(y.a,{trigger:"click",placement:"left",overlay:i.a.createElement(w.a,{id:"popover-ocenjivanje",title:""},!1===this.state.guest?i.a.createElement(E,{logOut:this.props.logOut,promeniOcenu:this.promeniOcenu,idDogadjaja:this.state.idDogadjaja}):i.a.createElement(i.a.Fragment,null,"Morate se prijaviti da bi ocenili doga\u0111aj"))},i.a.createElement("div",null,i.a.createElement("i",{className:"far fa-star"}),"  ","Oceni")))):i.a.createElement(i.a.Fragment,null)),i.a.createElement("div",{className:"sadrzajVreme"},i.a.createElement("div",{className:"sat"},i.a.createElement("i",{className:"far fa-clock"})),i.a.createElement("div",null,this.state.vreme_odrzavanja)),i.a.createElement("div",{className:"sadrzajDatum"},i.a.createElement("div",{className:"kalendar"},i.a.createElement("i",{className:"far fa-calendar-alt"})),i.a.createElement("div",null,this.vratiDan(),"  ",this.vratiMesec())),i.a.createElement("div",{className:"sadrzajCena"},i.a.createElement("div",{className:"novac"},i.a.createElement("i",{className:"fas fa-money-bill-wave"})),i.a.createElement("div",null,this.state.cena)))),!0!==this.props.tabela?i.a.createElement("div",{className:"kontrole"},i.a.createElement("div",{className:"ostaviMesto",onClick:this.state.guest?this.handleShow:this.handleZakazi},"Rezervi\u0161i kartu","  ",i.a.createElement("i",{className:"fas fa-ticket-alt"})),i.a.createElement("div",{className:"ostaviKomentar",onClick:this.state.guest?this.handleShow:this.handleKomentari},"Ostavi Komentar","  "," ",i.a.createElement("i",{className:"fas fa-comment-medical"}))," "):i.a.createElement(K,{className:"otkazivanje",promeniAktivnost:this.props.promeniAktivnost,idDogadjaja:this.props.idDogadjaja,aktivan:this.props.aktivan,datum:this.props.datum,logOut:this.props.logOut}))}},{key:"handleHide",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"nacrtaj_zakazivanje",value:function(){return i.a.createElement(i.a.Fragment,null,!1===this.state.ucitanaSedista?i.a.createElement(g.a,{className:"spiner",animation:"border",variant:"info"}):i.a.createElement("div",{className:"divZakazivanje"},i.a.createElement(f,{rasporedSedista:this.state.konf_sedista,zauzetaSedista:this.state.zauzeta_sedista,idDogadjaja:this.state.idDogadjaja,izvrsenaZamena:this.promeniZauzetaMesta,logOut:this.props.logOut,naslov:this.state.naslov,datum:this.state.datum,vreme:this.state.vreme_odrzavanja})))}},{key:"handleZakazi",value:function(){var a=!this.state.open;this.setState({open:a})}},{key:"handleKomentari",value:function(){var a=!this.state.openKomentari;this.setState({openKomentari:a})}},{key:"getKomentari",value:function(){var a=this,e=[],t=0;return this.state.informacijeOkomentarima.forEach(function(n){e.push(i.a.createElement(D,{key:t,guest:a.state.guest,administrator:a.state.administrator,id:n.id,username:n.username,date:n.datum,message:n.komentar,izbrisanKomentar:a.izbrisanKomentar})),t++}),i.a.createElement("div",{className:"komentariKontejner"},e," ")}},{key:"unesiKomentarHandler",value:function(a){var e=this;this.setState({UcitaniKomentari:!1}),this.setState({upisanKomentar:!1,spinnerDodajemKomentar:!0});var t=new FormData;t.append("idDogadjaja",this.state.idDogadjaja),t.append("komentar",this.state.korisnikovKomentar),fetch("./ThOr_php/dodajKomentar.php",{method:"POST",body:t}).then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(a){"NEMA"===a.Greska?(e.vratiKomentare(),e.setState({upisanKomentar:!1,spinnerDodajemKomentar:!1})):(e.props.logOut(),e.handleKomentari(),e.setState({upisanKomentar:!1,spinnerDodajemKomentar:!1,UcitaniKomentari:!1,show:!0}))}).catch(function(a){return console.log(a)})}},{key:"KomentarOnChageHandler",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.value))}},{key:"napraviKomentarSection",value:function(){var a=this;return i.a.createElement("div",{className:"komentarSection"},!0===this.state.UcitaniKomentari?i.a.createElement(N.a,{defaultActiveKey:"komentari",transition:!1,className:"komentariTabs",activeKey:this.state.key,onSelect:function(e){return a.setState({key:e})}},i.a.createElement(P.a,{eventKey:"komentari",title:"Komentari"},!0===this.state.UcitaniKomentari?this.getKomentari():i.a.createElement(g.a,{animation:"border",variant:"success"})),i.a.createElement(P.a,{eventKey:"dodajKomentar",title:"Dodaj Komentar"},i.a.createElement(I.a.Group,{controlId:"sopstveniKomentar"},i.a.createElement(I.a.Control,{as:"textarea",name:"korisnikovKomentar",rows:"5",placeholder:"Vas komentar",onChange:this.KomentarOnChageHandler}),i.a.createElement("hr",null),i.a.createElement(k.a,{variant:"outline-success",onClick:this.unesiKomentarHandler},!1===a.state.upisanKomentar&&!1===a.state.spinnerDodajemKomentar?i.a.createElement(i.a.Fragment,null,"Upi\u0161ite komentar"):!0===a.state.upisanKomentar?i.a.createElement("i",{className:"fas fa-check"}):!1===a.state.upisanKomentar&&!0===a.state.spinnerDodajemKomentar?i.a.createElement(g.a,{className:"spiner_zakazivanje",animation:"grow",variant:"dark",size:"sm"}):void 0)))," "):i.a.createElement(g.a,{animation:"border",variant:"success"}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"ExtendedGlavni"},this.Sadrzaj(),!0!==this.props.tabela?i.a.createElement(i.a.Fragment,null," ",i.a.createElement(O.a,{in:this.state.open},i.a.createElement("div",{className:"sedista"},this.nacrtaj_zakazivanje())),i.a.createElement(O.a,{in:this.state.openKomentari},i.a.createElement("div",{className:"sedista"},this.napraviKomentarSection()))):i.a.createElement(i.a.Fragment,null)),i.a.createElement(z.a,{show:this.state.show,variant:"light"},i.a.createElement(z.a.Heading,null,"Niste prijavljeni"),i.a.createElement("p",null,"Da bi pristupili dodatnom sadr\u017eaju morate biti prijavljeni."),i.a.createElement("hr",null),i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement(k.a,{onClick:this.handleHide,variant:"outline-secondary"},"U redu."))))}}]),e}(i.a.Component),V=t(7),L=function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).handleClose=function(){t.setState({zaModal:!1})},t.handleShow=function(){t.setState({zaModal:!0})},t.state={guest:a.guest,administrator:a.administrator,idDogadjaja:a.idDogadjaja,slika:a.slika,naslov:a.naslov,opis:a.opis,datum:a.datum,duzina_trajanja:a.duzina_trajanja,cena:a.cena,ocena_dogadjaja:a.ocena_dogadjaja,vreme_odrzavanja:a.vreme_odrzavanja,aktivan:a.aktivan,zaModal:!1},t.handleShow=t.handleShow.bind(Object(m.a)(Object(m.a)(t))),t.handleClose=t.handleClose.bind(Object(m.a)(Object(m.a)(t))),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"componentDidUpdate",value:function(a){this.props.guest!==a.guest&&this.setState({guest:this.props.guest}),this.props.administrator!==a.administrator&&this.setState({administrator:this.props.administrator})}},{key:"vratiMesec",value:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"][new Date(this.state.datum).getMonth()]}},{key:"vratiDan",value:function(){return new Date(this.state.datum).getDate()}},{key:"vratiVreme",value:function(){return this.state.vreme_odrzavanja}},{key:"vratiDanText",value:function(){return["Nedelja","Ponedeljak","Utorak","Sreda","Cetvrtak","Petak","Subota"][new Date(this.state.datum).getDay()]}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(j.a,{className:"eventCard",onClick:this.handleShow,style:{width:"18rem"}},i.a.createElement(j.a.Title,{className:"karticaNaslov"},this.state.naslov),i.a.createElement(j.a.Img,{className:"eventImage",src:this.state.slika}),i.a.createElement(j.a.Body,null,i.a.createElement("div",{className:"karticaTelo"},i.a.createElement("div",{className:"karticaDatum"},i.a.createElement("div",{className:"karticaDan"},this.vratiDan()),i.a.createElement("div",{className:"karticaMesec"},this.vratiMesec())),i.a.createElement("div",{className:"spacer"}),i.a.createElement("div",{className:"karticaVreme"},i.a.createElement("div",{className:"karticaDanTxt"},this.vratiDanText()),i.a.createElement("div",{className:"karticaSat"},this.vratiVreme()))))),i.a.createElement(V.a,{centered:"true",show:this.state.zaModal,onHide:this.handleClose,className:"modalExtendedDogadjaj",size:"xl"},i.a.createElement(V.a.Body,null,i.a.createElement(F,{logOut:this.props.logOut,guest:this.props.guest,administrator:this.props.administrator,idDogadjaja:this.state.idDogadjaja,slika:this.state.slika,naslov:this.state.naslov,opis:this.state.opis,datum:this.state.datum,duzina_trajanja:this.state.duzina_trajanja,cena:this.state.cena,ocena_dogadjaja:this.state.ocena_dogadjaja,vreme_odrzavanja:this.state.vreme_odrzavanja,aktivan:this.state.aktivan}))))}}]),e}(i.a.Component),x=(t(201),function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).state={korisnickoIme:"",lozinka:"",potvrdaLozinke:"",email:"",korisnickoImeValidacija:{potvrda:"",poruka:""},emailValidacija:{potvrda:"",poruka:""},lozinkaValidacija:{potvrda:"",poruka:""},potvrdaLozinkeValidacija:{potvrda:"",poruka:""},show:!0},t.loginState=t.props.loginState,t.obradiFormu=t.obradiFormu.bind(Object(m.a)(Object(m.a)(t))),t.changeProfilePictureURL=t.changeProfilePictureURL.bind(Object(m.a)(Object(m.a)(t))),t.handleChange=t.handleChange.bind(Object(m.a)(Object(m.a)(t))),t.obradiOdgovor=t.obradiOdgovor.bind(Object(m.a)(Object(m.a)(t))),t.proveriPodatke=t.proveriPodatke.bind(Object(m.a)(Object(m.a)(t))),t.proveriLozinku=t.proveriLozinku.bind(Object(m.a)(Object(m.a)(t))),t.proveriKorisnickoIme=t.proveriKorisnickoIme.bind(Object(m.a)(Object(m.a)(t))),t.proveriEmail=t.proveriEmail.bind(Object(m.a)(Object(m.a)(t))),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"proveriEmail",value:function(){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.state.email)?(this.setState({emailValidacija:{potvrda:!0,poruka:""}}),!0):(this.setState({emailValidacija:{potvrda:!1,poruka:"Email koji ste uneli nije validan!"}}),!1)}},{key:"proveriKorisnickoIme",value:function(){return this.state.korisnickoIme.length<6?(this.setState({korisnickoImeValidacija:{potvrda:!1,poruka:"Korisnicko ime mora da ime najmanje 6 karaktera"}}),!1):(this.setState({korisnickoImeValidacija:{potvrda:!0,poruka:""}}),!0)}},{key:"proveriLozinku",value:function(){var a="lozinka mora da ima 6 karaktera, da se razlikuje od korisni\u010dkog imena i email-a, i da sadr\u017ei lowercase,uppercase i bar jedan numeri\u010dki karakter";if(this.state.lozinka.length<6)return this.setState({lozinkaValidacija:{potvrda:!1,poruka:a}}),!1;if(this.state.lozinka===this.state.email)return this.setState({lozinkaValidacija:{potvrda:!1,poruka:a}}),!1;if(this.state.lozinka===this.state.korisnickoIme)return this.setState({lozinkaValidacija:{potvrda:!1,poruka:a}}),!1;var e=/[0-9]/;return e.test(this.state.lozinka)&&(e=/[a-z]/).test(this.state.lozinka)&&(e=/[A-Z]/).test(this.state.lozinka)?this.state.lozinka!==this.state.potvrdaLozinke?(this.setState({lozinkaValidacija:{potvrda:!1,poruka:"lozinke se ne poklapaju"}}),this.setState({potvrdaLozinkeValidacija:{potvrda:!1,poruka:""}}),!1):(this.setState({lozinkaValidacija:{potvrda:!0,poruka:""}}),this.setState({potvrdaLozinkeValidacija:{potvrda:!0,poruka:""}}),!0):(this.setState({lozinkaValidacija:{potvrda:!1,poruka:a}}),!1)}},{key:"proveriPodatke",value:function(){var a=!0;return this.proveriEmail()||(a=!1),this.proveriKorisnickoIme()||(a=!1),this.proveriLozinku()||(a=!1),a}},{key:"obradiFormu",value:function(a){var e=this;if(this.proveriPodatke()){var t=new FormData;t.append("email",this.state.email),t.append("korisnickoIme",this.state.korisnickoIme.replace(/'/gi,"''")),t.append("lozinka",this.state.lozinka.replace(/'/gi,"''"));var n={method:"post",body:t};this.setState({show:!1}),fetch("./ThOr_php/kreirajNalog.php",n).then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(a){return e.obradiOdgovor(a)}).catch(function(a){return console.log(a)})}}},{key:"obradiOdgovor",value:function(a){var e=this;if("email"===a.Greska){this.setState({korisnickoImeValidacija:{potvrda:"",poruka:""}}),this.setState({lozinkaValidacija:{potvrda:"",poruka:""}}),this.setState({potvrdaLozinkeValidacija:{potvrda:"",poruka:""}}),this.setState({emailValidacija:{potvrda:!1,poruka:"Vec postoji nalog sa tim email-om"}},function(){return e.setState({show:!0})})}else"Greska u bazi"===a.Greska?(alert("Greska[Problem sa bazom], pokusajte kasnije"),this.setState({korisnickoImeValidacija:{potvrda:"",poruka:""}}),this.setState({lozinkaValidacija:{potvrda:"",poruka:""}}),this.setState({potvrdaLozinkeValidacija:{potvrda:"",poruka:""}}),this.setState({emailValidacija:{potvrda:"",poruka:""}}),this.setState({show:!0})):this.setState({show:!0},function(){return e.loginState(!1)})}},{key:"handleChange",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.value))}},{key:"changeProfilePictureURL",value:function(){var a=document.querySelector("input[type='profileImage']").value;this.setState({profilePicture:a})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.show?i.a.createElement("div",null,i.a.createElement(I.a,null,i.a.createElement(I.a.Group,{controlId:"formKreirajNalogEmail"},i.a.createElement(I.a.Label,null,"Email adresa"),i.a.createElement(I.a.Control,{type:"email",placeholder:"Unesite email",name:"email",onChange:this.handleChange,isValid:!0===this.state.emailValidacija.potvrda,isInvalid:!1===this.state.emailValidacija.potvrda}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.emailValidacija.poruka),i.a.createElement(I.a.Text,{className:"text-muted"})),i.a.createElement(I.a.Group,{controlId:"formKreirajNalogKorisnickoIme"},i.a.createElement(I.a.Label,null,"Korisnicko Ime"),i.a.createElement(I.a.Control,{type:"text",placeholder:"Unesite korisnicko ime",name:"korisnickoIme",onChange:this.handleChange,isValid:!0===this.state.korisnickoImeValidacija.potvrda,isInvalid:!1===this.state.korisnickoImeValidacija.potvrda}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.korisnickoImeValidacija.poruka),i.a.createElement(I.a.Text,{className:"text-muted"})),i.a.createElement(I.a.Group,{controlId:"formKreirajNalogLozinka"},i.a.createElement(I.a.Label,null,"Lozinka"),i.a.createElement(I.a.Control,{type:"password",placeholder:"Unesite lozinka",name:"lozinka",onChange:this.handleChange,isValid:!0===this.state.lozinkaValidacija.potvrda,isInvalid:!1===this.state.lozinkaValidacija.potvrda}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.lozinkaValidacija.poruka)),i.a.createElement(I.a.Group,{controlId:"formKreirajNalogLozinkaPotvrda"},i.a.createElement(I.a.Label,null,"Potvrda Lozinke"),i.a.createElement(I.a.Control,{type:"password",placeholder:"Potvrdite lozinku",name:"potvrdaLozinke",onChange:this.handleChange,isValid:!0===this.state.potvrdaLozinkeValidacija.potvrda,isInvalid:!1===this.state.potvrdaLozinkeValidacija.potvrda})),i.a.createElement("br",null),i.a.createElement(k.a,{variant:"dark",type:"button",onClick:this.obradiFormu},"Kreiraj Nalog"))):i.a.createElement(g.a,{animation:"border",variant:"primary"}))}}]),e}(n.Component)),T=(t(202),t(203),t(169)),_=t(32),G=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={previewNaslov:"Naslov",previewOpis:"Opis:",previewDatum:"2000-01-01",previewSatnica:"20:00",previewDuzinaTrajanja:"",previewCena:100,idIzabraneSale:0,nazivButtona:"Izaberite salu",sale:[],previewSlikaUrl:"https://imaging.broadway.com/images/poster-178275/w230/222222/96929-15.jpeg",show:!1,dogadjaj:{}},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1})},n.iscrtajformu=n.iscrtajformu.bind(Object(m.a)(Object(m.a)(n))),n.menjajPreviewKarticu=n.menjajPreviewKarticu.bind(Object(m.a)(Object(m.a)(n))),n.obaviUbacivanje=n.obaviUbacivanje.bind(Object(m.a)(Object(m.a)(n))),n.ucitajSale=n.ucitajSale.bind(Object(m.a)(Object(m.a)(n))),n.iscrtajOpcijeZaSalu=n.iscrtajOpcijeZaSalu.bind(Object(m.a)(Object(m.a)(n))),n.izabranaSala=n.izabranaSala.bind(Object(m.a)(Object(m.a)(n))),n.ucitajSale(),n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"obaviUbacivanje",value:function(){var a=this;if(0!==this.state.idIzabraneSale){var e=this.state.previewOpis.replace(/'/gi,"''"),t=this.state.previewNaslov.replace(/'/gi,"''"),n=this.state.previewSlikaUrl.replace(/'/gi,"''"),i=new FormData;i.append("naziv",t),i.append("datum_pocetka",this.state.previewDatum),i.append("cena",this.state.previewCena),i.append("duzina_trajanja",this.state.previewDuzinaTrajanja),i.append("aktivan","1"),i.append("opis",e),i.append("url_slike",n),i.append("idIzabraneSale",this.state.idIzabraneSale),i.append("vreme_odrzavanja",this.state.previewSatnica),fetch("./ThOr_php/dodajDogadjaj.php",{method:"POST",body:i}).then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(e){a.props.dodajDogadjaj(e),fetch("./ThOr_php/vratiIdNajnovijegDogadjaja.php").then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(e){fetch("./ThOr_php/vratiSale.php").then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(t){t.forEach(function(t){if(t.id===a.state.idIzabraneSale){var n=new FormData;n.append("idDogadjaj",e),n.append("zauzetaMesta",t.default_zauzeta_sedista),fetch("./ThOr_php/dodajUtabeluZauzetaMesta.php",{method:"POST",body:n}).then(function(a){if(!a.ok)throw new Error("fetch greska")}).catch(function(a){return console.log(a)})}})}).catch(function(a){return console.log(a)})}).catch(function(a){return console.log(a)})}).catch(function(a){return console.log(a)}),this.handleHide()}}},{key:"componentWillUnmount",value:function(){this.setState={previewNaslov:"Naslov",previewOpis:"Opis:",previewDatum:"2000-01-01",previewSatnica:"20:00",previewDuzinaTrajanja:"",idIzabraneSale:0,sale:[],previewCena:"",previewSlikaUrl:"",show:!1}}},{key:"menjajPreviewKarticu",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.value))}},{key:"ucitajSale",value:function(){var a=this;fetch("./ThOr_php/vratiSale.php").then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(e){return a.setState({sale:e})}).catch(function(a){return console.log(a)})}},{key:"izabranaSala",value:function(a){this.setState({idIzabraneSale:a.target.name,nazivButtona:"sala id: "+a.target.name})}},{key:"iscrtajOpcijeZaSalu",value:function(){var a=this;return this.state.sale.map(function(e,t){return i.a.createElement(_.a.Item,{key:t,onClick:a.izabranaSala,name:e.id},e.naziv," id:",e.id)})}},{key:"iscrtajformu",value:function(){return i.a.createElement("div",{className:"divZaFormu"},i.a.createElement(I.a,null,i.a.createElement(I.a.Group,{controlId:"exampleForm.ControlInput1"},i.a.createElement(I.a.Label,null,"Naslov"),i.a.createElement(I.a.Control,{onChange:this.menjajPreviewKarticu,type:"text",name:"previewNaslov",placeholder:"naziv dogadjaja"})),i.a.createElement(I.a.Group,{controlId:"exampleForm.ControlInput1"},i.a.createElement(I.a.Label,null,"Datum"),i.a.createElement(I.a.Control,{name:"previewDatum",onChange:this.menjajPreviewKarticu,type:"date",placeholder:"12.10.2010"})),i.a.createElement(I.a.Group,{controlId:"Cena"},i.a.createElement(I.a.Label,null,"Cena"),i.a.createElement(I.a.Control,{name:"previewCena",onChange:this.menjajPreviewKarticu,type:"number",placeholder:"500din"})),i.a.createElement(I.a.Group,{controlId:"exampleForm.ControlInput1"},i.a.createElement(I.a.Label,null,"Satnica"),i.a.createElement(I.a.Control,{name:"previewSatnica",onChange:this.menjajPreviewKarticu,type:"text",placeholder:"17:00"})),i.a.createElement(I.a.Group,{controlId:"exampleForm.ControlInput1"},i.a.createElement(I.a.Label,null,"Duzina trajanja"),i.a.createElement(I.a.Control,{name:"previewDuzinaTrajanja",onChange:this.menjajPreviewKarticu,type:"text",placeholder:"1h"})),i.a.createElement(I.a.Group,{controlId:"opisPreviewCartice"},i.a.createElement(I.a.Label,null,"Opis dogadjaja"),i.a.createElement(I.a.Control,{name:"previewOpis",onChange:this.menjajPreviewKarticu,as:"textarea",rows:"3"})),i.a.createElement(I.a.Group,{controlId:"url"},i.a.createElement(I.a.Label,null,"Navedite url slike"),i.a.createElement(I.a.Control,{name:"previewSlikaUrl",onChange:this.menjajPreviewKarticu,type:"urlSlike",placeholder:"example :https://cdn-img...."})),i.a.createElement(I.a.Group,{className:"kontroleDodajDogadjaj"},i.a.createElement(T.a,{variant:"secondary",id:"dropdownSala",title:this.state.nazivButtona},this.iscrtajOpcijeZaSalu()),i.a.createElement(k.a,{variant:"success",onClick:this.obaviUbacivanje},"Dodaj dogadjaj"))))}},{key:"vratiMesec",value:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"][new Date(this.state.previewDatum).getMonth()]}},{key:"vratiDan",value:function(){return new Date(this.state.previewDatum).getDate()}},{key:"vratiVreme",value:function(){return this.state.previewSatnica}},{key:"vratiDanText",value:function(){return["Nedelja","Ponedeljak","Utorak","Sreda","Cetvrtak","Petak","Subota"][new Date(this.state.previewDatum).getDay()]}},{key:"iscrtajPreviewKarticu",value:function(){return i.a.createElement(j.a,{className:"previewCard",onClick:this.handleShow,style:{width:"18rem"}},i.a.createElement(j.a.Title,{className:"karticaNaslov"},this.state.previewNaslov),i.a.createElement(j.a.Img,{className:"eventImage",src:this.state.previewSlikaUrl}),i.a.createElement(j.a.Body,null,i.a.createElement("div",{className:"karticaTelo"},i.a.createElement("div",{className:"karticaDatum"},i.a.createElement("div",{className:"karticaDan"},this.vratiDan()),i.a.createElement("div",{className:"karticaMesec"},this.vratiMesec())),i.a.createElement("div",{className:"spacer"}),i.a.createElement("div",{className:"karticaVreme"},i.a.createElement("div",{className:"karticaDanTxt"},this.vratiDanText()),i.a.createElement("div",{className:"karticaSat"},this.vratiVreme())))))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(j.a,{className:"dodajDogadjajKartica",onClick:this.handleShow,style:{width:"18rem"}},i.a.createElement(j.a.Body,null,i.a.createElement("i",{className:"fas fa-plus"}))),i.a.createElement(V.a,{size:"xl",show:this.state.show,onHide:this.handleHide,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title"},i.a.createElement(V.a.Header,{closeButton:!0},i.a.createElement(V.a.Title,{id:"example-custom-modal-styling-title"},"Dodaj novi dogadjaj")),i.a.createElement(V.a.Body,null,i.a.createElement("div",{className:"DodajEventFormaBox"},this.iscrtajformu(),this.iscrtajPreviewKarticu()))))}}]),e}(i.a.Component),M=t(277),B=t(278),A=t(276),Z=t(94),H=t(76),U=t(28),R=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={show:!1,nazivPozorista:n.props.nazivPozorista,ulica:n.props.ulica,grad:n.props.grad,kontakt:n.props.kontakt,radnoVreme:n.props.radnoVreme,lokacijaX:n.props.lokacijaX,lokacijaY:n.props.lokacijaY},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1})},n.podaciState=n.props.podaciState,n.handleChange=n.handleChange.bind(Object(m.a)(Object(m.a)(n))),n.obradiFormu=n.obradiFormu.bind(Object(m.a)(Object(m.a)(n))),n.obradiOdgovor=n.obradiOdgovor.bind(Object(m.a)(Object(m.a)(n))),n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"componentDidUpdate",value:function(a){this.props.nazivPozorista!==a.nazivPozorista&&this.setState({nazivPozorista:this.props.nazivPozorista}),this.props.ulica!==a.ulica&&this.setState({ulica:this.props.ulica}),this.props.grad!==a.grad&&this.setState({grad:this.props.grad}),this.props.kontakt!==a.kontakt&&this.setState({kontakt:this.props.kontakt}),this.props.radnoVreme!==a.radnoVreme&&this.setState({radnoVreme:this.props.radnoVreme}),this.props.lokacijaX!==a.lokacijaX&&this.setState({lokacijaX:this.props.lokacijaX}),this.props.lokacijaY!==a.lokacijaY&&this.setState({lokacijaY:this.props.lokacijaY})}},{key:"obradiOdgovor",value:function(a){"NEMA"===a.Greska||("NISTE_ADMIN"===a.Greska?alert("Nemate autorizaciju da menjate podatke"):this.props.logOut()),this.podaciState(this.state.nazivPozorista,this.state.ulica,this.state.grad,this.state.kontakt,this.state.radnoVreme,this.state.lokacijaX,this.state.lokacijaY),this.setState({show:!1})}},{key:"handleChange",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.value))}},{key:"obradiFormu",value:function(){var a=this,e=new FormData;e.append("naziv",this.state.nazivPozorista),e.append("ulica",this.state.ulica),e.append("grad",this.state.grad),e.append("kontakt",this.state.kontakt),e.append("radnoVreme",this.state.radnoVreme),e.append("lokacijaX",this.state.lokacijaX),e.append("lokacijaY",this.state.lokacijaY),fetch("./ThOr_php/azurirajInfo.php",{method:"POST",body:e}).then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(e){return a.obradiOdgovor(e)}).catch(function(a){return console.log(a)})}},{key:"nacrtajTelo",value:function(){return i.a.createElement(I.a,null,i.a.createElement(I.a.Group,{controlId:"formBasicEmail"},i.a.createElement(I.a.Label,null,"Naziv"),i.a.createElement(I.a.Control,{name:"nazivPozorista",type:"text",placeholder:this.props.nazivPozorista,onChange:this.handleChange}),i.a.createElement(I.a.Text,{className:"text-muted"})),i.a.createElement(I.a.Group,{controlId:"formBasicKorisnickoIme"},i.a.createElement(I.a.Label,null,"Adresa"),i.a.createElement(I.a.Control,{name:"ulica",type:"text",placeholder:this.props.ulica,onChange:this.handleChange}),i.a.createElement(I.a.Text,{className:"text-muted"})),i.a.createElement(I.a.Group,{controlId:"formBasicKorisnickoIme"},i.a.createElement(I.a.Label,null,"Grad"),i.a.createElement(I.a.Control,{name:"grad",type:"text",placeholder:this.props.grad,onChange:this.handleChange}),i.a.createElement(I.a.Text,{className:"text-muted"})),i.a.createElement(I.a.Group,{controlId:"formBasicKorisnickoIme"},i.a.createElement(I.a.Label,null,"Kontakt"),i.a.createElement(I.a.Control,{name:"kontakt",type:"text",placeholder:this.props.kontakt,onChange:this.handleChange}),i.a.createElement(I.a.Text,{className:"text-muted"})),i.a.createElement(I.a.Group,{controlId:"formBasicKorisnickoIme"},i.a.createElement(I.a.Label,null,"Radno vreme"),i.a.createElement(I.a.Control,{name:"radnoVreme",type:"text",placeholder:this.props.radnoVreme,onChange:this.handleChange}),i.a.createElement(I.a.Text,{className:"text-muted"})),i.a.createElement(I.a.Group,{controlId:"formBasicKorisnickoIme"},i.a.createElement(I.a.Label,null,"Koordinate"),i.a.createElement(I.a.Control,{name:"lokacijaX",type:"text",placeholder:this.props.lokacijaX,onChange:this.handleChange}),i.a.createElement(I.a.Label,null),i.a.createElement(I.a.Control,{name:"lokacijaY",type:"text",placeholder:this.props.lokacijaY,onChange:this.handleChange}),i.a.createElement(I.a.Text,{className:"text-muted"})),i.a.createElement(I.a.Group,{className:"modalIzmeniInfoDugme"},i.a.createElement(k.a,{variant:"secondary",type:"button",onClick:this.obradiFormu},"Sa\u010duvaj")))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fas fa-pencil-alt",onClick:this.handleShow}),i.a.createElement(V.a,{centered:"true",show:this.state.show,onHide:this.handleHide,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title"},i.a.createElement(V.a.Header,{closeButton:!0},i.a.createElement(V.a.Title,{id:"example-custom-modal-styling-title"},"Osnovni podaci o pozori\u0161tu")),i.a.createElement(V.a.Body,null,this.nacrtajTelo())))}}]),e}(i.a.Component),J=function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).state={dogadjaji:[],dogadjajiZaPrikaz:[],guest:a.guest,administrator:a.administrator,open:!1,nazivPozorista:"",ulica:"",grad:"",kontakt:"",radnoVreme:"",lokacijaX:"",lokacijaY:"",filterCenaDo:99999,cenaDo:99999,filterDatum:"2100-09-12",datum:"2100-09-12",kljuc:0,drugaNaslovna:!1},t.vratiDogadjaje=t.vratiDogadjaje.bind(Object(m.a)(Object(m.a)(t))),t.handlePromenaPodataka=t.handlePromenaPodataka.bind(Object(m.a)(Object(m.a)(t))),t.handleChange=t.handleChange.bind(Object(m.a)(Object(m.a)(t))),t.nacrtajDogadjaje=t.nacrtajDogadjaje.bind(Object(m.a)(Object(m.a)(t))),t.dodajDogadjaj=t.dodajDogadjaj.bind(Object(m.a)(Object(m.a)(t))),t.vratiDogadjaje(),t.vratiInfo(),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"dodajDogadjaj",value:function(a){console.log(a),this.setState({dogadjaji:[].concat(Object(p.a)(this.state.dogadjaji),[a])})}},{key:"componentDidUpdate",value:function(a){this.props.guest!==a.guest&&this.setState({guest:this.props.guest}),this.props.administrator!==a.administrator&&this.setState({administrator:this.props.administrator}),this.props.refreshRepertoar!==a.refreshRepertoar&&this.vratiDogadjaje()}},{key:"componentDidMount",value:function(){var a=this;this.interval=setInterval(function(){return a.setState({drugaNaslovna:!a.state.drugaNaslovna})},7e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"handlePromenaPodataka",value:function(a,e,t,n,i,r,o){var s=a;this.setState({nazivPozorista:s,ulica:e,grad:t,kontakt:n,radnoVreme:i,lokacijaX:r,lokacijaY:o})}},{key:"handleChange",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.value))}},{key:"nacrtajDodajEventDugme",value:function(){if(!0===this.state.administrator)return i.a.createElement("div",null,i.a.createElement(G,{dodajDogadjaj:this.dodajDogadjaj}))}},{key:"nacrtajIzmeniPodatke",value:function(){if(!0===this.state.administrator)return i.a.createElement("div",null,i.a.createElement(R,{podaciState:this.handlePromenaPodataka,nazivPozorista:this.state.nazivPozorista,ulica:this.state.ulica,grad:this.state.grad,kontakt:this.state.kontakt,radnoVreme:this.state.radnoVreme,lokacijaX:this.state.lokacijaX,lokacijaY:this.state.lokacijaY,logOut:this.props.logOut}))}},{key:"obradiFilter",value:function(){var a=this,e=[];this.state.dogadjaji.map(function(t){parseInt(t.cena)<=parseInt(a.state.filterCenaDo)&&new Date(a.state.filterDatum)-new Date(t.datum_pocetka)>0&&e.push(t)}),this.setState({dogadjajiZaPrikaz:e})}},{key:"nacrtajDogadjaj",value:function(a){return i.a.createElement(L,{logOut:this.props.logOut,key:a.id,guest:this.state.guest,administrator:this.state.administrator,idDogadjaja:a.id,slika:a.url_slike,naslov:a.naziv,opis:a.opis,datum:a.datum_pocetka,duzina_trajanja:a.duzina_trajanja,cena:a.cena,ocena_dogadjaja:a.prosecnaOcena,vreme_odrzavanja:a.vreme_odrzavanja,aktivan:a.aktivan})}},{key:"vratiInfo",value:function(){var a=this;fetch("./ThOr_php/vratiInfo.php").then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(e){return a.setState({nazivPozorista:e.naziv,ulica:e.ulica,grad:e.grad,kontakt:e.kontakt,radnoVreme:e.radnoVreme,lokacijaX:e.lokacijaX,lokacijaY:e.lokacijaY})}).catch(function(a){return console.log(a)})}},{key:"vratiDogadjaje",value:function(){var a=this;fetch("./ThOr_php/vratiDogadjaje.php").then(function(a){if(a.ok)return a.json();throw new Error("fetch greska")}).then(function(e){return a.setState({dogadjaji:e,dogadjajiZaPrikaz:e})}).catch(function(a){return console.log(a)})}},{key:"nacrtajDogadjaje",value:function(){var a=this,e=[],t=this.state.open;return this.state.dogadjajiZaPrikaz.map(function(t){1==t.aktivan&&e.push(a.nacrtajDogadjaj(t))}),i.a.createElement("div",{className:"daBiMoglaPozadinaLepa"},i.a.createElement("div",{className:"repertoar",id:"Repertoar"},i.a.createElement(Z.a,{className:"reperoarNaslovKontejner",fluid:"true"},i.a.createElement(H.a,null,i.a.createElement(U.a,null,i.a.createElement("h1",{className:"repertoarNaslov"},"Repertoar")),i.a.createElement(U.a,{className:"search"},i.a.createElement(k.a,{variant:"outline-light",onClick:function(){return a.setState({open:!t})},"aria-controls":"example-collapse-text","aria-expanded":t},"Filtriraj","  ",i.a.createElement("i",{className:"fas fa-search"}))))),i.a.createElement(O.a,{className:"filteriTelo",in:this.state.open},i.a.createElement(I.a,null,i.a.createElement(I.a.Row,null,i.a.createElement(I.a.Group,{as:U.a},i.a.createElement(I.a.Label,null,"Maksimalna cena karte: "),i.a.createElement(I.a.Control,{name:"filterCenaDo",type:"number",onChange:this.handleChange})),i.a.createElement(I.a.Group,{as:U.a},i.a.createElement(I.a.Label,null,"Krajnji datum:"),i.a.createElement(I.a.Control,{name:"filterDatum",type:"date",onChange:this.handleChange})),i.a.createElement(I.a.Group,{as:U.a}),i.a.createElement(k.a,{variant:"outline-secondary",onClick:function(){a.obradiFilter()}},i.a.createElement("i",{className:"fas fa-search"}))))),i.a.createElement("div",{className:"linija"}),i.a.createElement("div",{className:"divDogadjaji"},e,this.nacrtajDodajEventDugme())))}},{key:"nacrtajSlide",value:function(){return i.a.createElement("div",{className:this.state.drugaNaslovna?"naslovna":"naslovna2"},i.a.createElement("h1",{className:"naslov"},"SA POZORI\u0160TEM ",i.a.createElement("br",null),"NA TI"))}},{key:"nacrtajMapu",value:function(){return i.a.createElement("div",{className:"mapa"},i.a.createElement(M.a,{center:[this.state.lokacijaX,this.state.lokacijaY],zoom:13,style:{height:"80vh"},scrollWheelZoom:!1,boxZoom:!1},i.a.createElement(B.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i.a.createElement(A.a,{className:"marker",position:[this.state.lokacijaX,this.state.lokacijaY]})))}},{key:"nacrtajLokaciju",value:function(){return i.a.createElement("div",{className:"lokacija",id:"Lokacija"},this.nacrtajMapu(),i.a.createElement("div",{className:"lokacijaOpis"},i.a.createElement("h3",{className:"lokacijaNaslov"},"KAKO DO NAS"),i.a.createElement("p",null,i.a.createElement("strong",null,this.state.nazivPozorista,i.a.createElement("br",null)),this.state.ulica,i.a.createElement("br",null),this.state.grad,i.a.createElement("br",null)),i.a.createElement("p",null,i.a.createElement("strong",null,"Kontakt:"),i.a.createElement("br",null),this.state.kontakt),i.a.createElement("p",null,i.a.createElement("strong",null,"RadnoVreme:"),i.a.createElement("br",null),this.state.radnoVreme),i.a.createElement("div",{className:"dugmeIzmeni"},this.nacrtajIzmeniPodatke())))}},{key:"nacrtajPropagandu",value:function(){return i.a.createElement("div",{className:"propagandaGlavni"},i.a.createElement("div",{className:"propagandaUnutrasni"},i.a.createElement("h1",null,"Ne propustite nijedan ",i.a.createElement("br",null),"doga\u0111aj!"),i.a.createElement("div",{className:"propaganda"},i.a.createElement("div",{className:"propagandaLogin"},this.state.guest?i.a.createElement(x,{loginState:this.props.loginState}):this.akoJeVecUlogovan()))))}},{key:"akoJeVecUlogovan",value:function(){return i.a.createElement("div",{className:"vecUlogovan"},i.a.createElement("div",null,i.a.createElement("strong",null,"Prijavljeni ste!"),i.a.createElement("br",null)),i.a.createElement("i",{className:"fas fa-mail-bulk"}),i.a.createElement("div",{className:"fusnota"},"Bi\u0107ete obave\u0161teni o predstoje\u0107im doga\u0111ajima"))}},{key:"nacrtajAbout",value:function(){return i.a.createElement("footer",{className:"about"},i.a.createElement("div",{className:"about-levo"},i.a.createElement("i",{className:"fas fa-theater-masks"}),i.a.createElement("p",null,"Theatre")),i.a.createElement("div",{className:"about-desno"},i.a.createElement("h5",null,this.state.nazivPozorista),i.a.createElement("p",null,this.state.ulica,i.a.createElement("br",null),this.state.grad,i.a.createElement("br",null),"Kontakt: ",this.state.kontakt)))}},{key:"render",value:function(){return i.a.createElement("div",{className:"Telo",id:"Home"},this.nacrtajSlide(),this.nacrtajDogadjaje(),this.nacrtajPropagandu(),this.nacrtajLokaciju(),this.nacrtajAbout(),i.a.createElement("link",{rel:"stylesheet",href:"//cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css"}),i.a.createElement("script",{src:"https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"}))}}]),e}(i.a.Component),X=t(77),Y=t(27),q=(t(142),function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).onKeyPress=function(a){13===a.which&&t.obradiFormu()},t.state={email:"",lozinka:"",show:!0,emailValidacija:{potvrda:"",poruka:""},lozinkaValidacija:{potvrda:"",poruka:""}},t.loginState=t.props.loginState,t.obradiFormu=t.obradiFormu.bind(Object(m.a)(Object(m.a)(t))),t.handleChange=t.handleChange.bind(Object(m.a)(Object(m.a)(t))),t.proveriPodatke=t.proveriPodatke.bind(Object(m.a)(Object(m.a)(t))),t.obradiOdgovor=t.obradiOdgovor.bind(Object(m.a)(Object(m.a)(t))),t.onKeyPress=t.onKeyPress.bind(Object(m.a)(Object(m.a)(t))),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"proveriPodatke",value:function(){var a="Email koji ste uneli nije validan!",e=!0;return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.state.email)?this.setState({emailValidacija:{potvrda:!0,poruka:a}}):(this.setState({emailValidacija:{potvrda:!1,poruka:a}}),e=!1),this.state.lozinka.length<6?(this.setState({lozinkaValidacija:{potvrda:!1,poruka:"Nije validna lozinka"}}),e=!1):this.setState({lozinkaValidacija:{potvrda:!0,poruka:""}}),e}},{key:"obradiFormu",value:function(){var a=this;if(this.proveriPodatke()){var e=new FormData;e.append("email",this.state.email),e.append("lozinka",this.state.lozinka.replace(/'/gi,"''")),this.setState({show:!1}),fetch("./ThOr_php/prijava.php",{method:"post",body:e}).then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(e){return a.obradiOdgovor(e)}).catch(function(a){return console.log(a)})}}},{key:"obradiOdgovor",value:function(a){var e=this;if("email"===a.Greska)this.setState({emailValidacija:{potvrda:!1,poruka:"Ne postoji nalog sa tim email-om"}},function(){return e.setState({show:!0})});else if("lozinka"===a.Greska)this.setState({lozinkaValidacija:{potvrda:!1,poruka:"Pogre\u0161na lozinka"}},function(){return e.setState({show:!0})});else if("Nema"===a.Greska){var t=!0;"NE"===a.Admin&&(t=!1),this.loginState(t)}else this.setState({emailValidacija:{potvrda:!1,poruka:"Trenutno ste suspendovani [Do:"+a.Do+" ]"}},function(){return e.setState({show:!0})})}},{key:"handleChange",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.value))}},{key:"render",value:function(){return i.a.createElement("div",null,this.state.show?i.a.createElement(I.a,null,i.a.createElement(I.a.Group,{controlId:"formBasicEmail"},i.a.createElement(I.a.Label,null,"Email adresa"),i.a.createElement(I.a.Control,{name:"email",type:"email",placeholder:"Unesite email",onChange:this.handleChange,isInvalid:!1===this.state.emailValidacija.potvrda,onKeyPress:this.onKeyPress}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.emailValidacija.poruka),i.a.createElement(I.a.Text,{className:"text-muted"})),i.a.createElement(I.a.Group,{controlId:"formBasicLozinka"},i.a.createElement(I.a.Label,null,"Lozinka"),i.a.createElement(I.a.Control,{name:"lozinka",type:"password",placeholder:"Unesite lozinka",onChange:this.handleChange,isInvalid:!1===this.state.lozinkaValidacija.potvrda,onKeyPress:this.onKeyPress}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.lozinkaValidacija.poruka)),i.a.createElement(k.a,{variant:"dark",type:"button",onClick:this.obradiFormu},"Prijavi se")):i.a.createElement(g.a,{animation:"border",variant:"primary"}))}}]),e}(n.Component)),W=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={show:!1},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1})},n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Y.a.Link,{onClick:this.handleShow},"Prijavi se"),i.a.createElement(V.a,{centered:"true",show:this.state.show,onHide:this.handleHide,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",scrollable:"false"},i.a.createElement(V.a.Header,{closeButton:!0},i.a.createElement(V.a.Title,{className:"title",id:"example-custom-modal-styling-title"},"Prijava")),i.a.createElement(V.a.Body,null,i.a.createElement(q,{loginState:this.props.loginState}))))}}]),e}(i.a.Component),$=(t(206),t(171)),Q=t.n($),aa=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={show:!1},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1})},n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Y.a.Link,{onClick:this.handleShow},"Kreiraj Nalog"),i.a.createElement(V.a,{centered:"true",show:this.state.show,onHide:this.handleHide,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title"},i.a.createElement(V.a.Header,{closeButton:!0},i.a.createElement(V.a.Title,{id:"example-custom-modal-styling-title"},"Kreiraj Nalog")),i.a.createElement(V.a.Body,null,i.a.createElement(x,{loginState:this.props.loginState}))))}}]),e}(i.a.Component),ea=(t(268),t(18)),ta=t(70),na=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={stranica:1,brojZaPrikaz:5,dogadjaji:[],brojDogadjaja:!1,zadnjaStranica:0,loading:!0,opcije:[],idKorisnika:n.props.idKorisnika,opis:"",prikaziOpis:!1,naslov:""},n.nacrtajFooter=n.nacrtajFooter.bind(Object(m.a)(Object(m.a)(n))),n.promeniStranicu=n.promeniStranicu.bind(Object(m.a)(Object(m.a)(n))),n.vratiDogadjaje=n.vratiDogadjaje.bind(Object(m.a)(Object(m.a)(n))),n.pormenaBrojaZaPrikaz=n.pormenaBrojaZaPrikaz.bind(Object(m.a)(Object(m.a)(n))),n.sakrijOpis=n.sakrijOpis.bind(Object(m.a)(Object(m.a)(n))),n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"sakrijOpis",value:function(){this.setState({prikaziOpis:!1})}},{key:"componentDidMount",value:function(){for(var a=[],e=5;e<=25;e+=5)a.push(e);this.setState({opcije:a}),this.vratiDogadjaje(this.state.stranica)}},{key:"pormenaBrojaZaPrikaz",value:function(a){var e=this;this.setState({stranica:1},this.setState({brojZaPrikaz:a.target.value},function(){return e.setState({zadnjaStranica:Math.ceil(e.state.brojDogadjaja/e.state.brojZaPrikaz)},function(){e.setState({loading:!0},function(){return e.vratiDogadjaje(e.state.stranica)})})}))}},{key:"promeniStranicu",value:function(a){!isNaN(a)&&a>0&&a<=this.state.zadnjaStranica&&a!==this.state.stranica&&(this.setState({stranica:a}),this.setState({loading:!0}),this.vratiDogadjaje(a))}},{key:"vratiDogadjaje",value:function(a){var e=this,t=new FormData;t.append("stranica",a),t.append("brojDogadjaja",this.state.brojZaPrikaz),!1!==this.state.idKorisnika&&t.append("Id",this.state.idKorisnika),!1===this.state.brojDogadjaja&&t.append("vratiMax",0),fetch("./ThOr_php/Korisnik/vratiKorisnikoveDogadjaje.php",{method:"post",body:t}).then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(a){return e.obradiOdgovor(a)}).catch(function(a){return console.log(a)})}},{key:"obradiOdgovor",value:function(a){var e=this;"NEMA"===a.Greska?(this.setState({dogadjaji:a.Dogadjaji},function(){return e.setState({loading:!1})}),!1===this.state.brojDogadjaja&&this.setState({brojDogadjaja:a.Ukupno},function(){return e.setState({zadnjaStranica:Math.ceil(e.state.brojDogadjaja/e.state.brojZaPrikaz)})})):this.props.logOut()}},{key:"nacrtajDogadjaje",value:function(){var a=this;return i.a.createElement(i.a.Fragment,null,!0===this.state.loading?i.a.createElement(g.a,{animation:"border",variant:"primary"}):i.a.createElement(ta.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Naziv"),i.a.createElement("th",null,"Datum"),i.a.createElement("th",null,"Cena"),i.a.createElement("th",null,"Ocena"),i.a.createElement("th",null,"Opis"))),i.a.createElement("tbody",null,!1!==this.state.brojDogadjaja&&0!==this.state.brojDogadjaja?this.state.dogadjaji.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t+1+(a.state.stranica-1)*a.state.brojZaPrikaz),i.a.createElement("td",null,e.naziv),i.a.createElement("td",null,e.datum_pocetka),i.a.createElement("td",null,e.cena),i.a.createElement("td",null,e.prosecnaOcena),i.a.createElement("td",null," ",i.a.createElement(y.a,{placement:"right",overlay:i.a.createElement(C.a,{id:"tooltip-disabled"},"Prikazi opis")},i.a.createElement("i",{className:"fas fa-info-circle fa-2x",onClick:function(){return a.setState({opis:e.opis},function(){return a.setState({prikaziOpis:!0,naslov:e.naziv})})}}))))}):i.a.createElement(i.a.Fragment,null))))}},{key:"nacrtajFooter",value:function(){var a=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,null,i.a.createElement(I.a.Row,{className:"footerKorisnici"},i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Stranica"),i.a.createElement(ea.a,null,i.a.createElement(ea.a.First,{onClick:function(e){return a.promeniStranicu(1)}}),i.a.createElement(ea.a.Prev,{onClick:function(e){return a.promeniStranicu(a.state.stranica-1)}}),this.state.stranica>1?i.a.createElement(ea.a.Item,{onClick:function(e){return a.promeniStranicu(a.state.stranica-1)}},this.state.stranica-1):i.a.createElement(i.a.Fragment,null),i.a.createElement(ea.a.Item,{active:!0},this.state.stranica),this.state.stranica<this.state.zadnjaStranica?i.a.createElement(ea.a.Item,{onClick:function(e){return a.promeniStranicu(a.state.stranica+1)}},this.state.stranica+1):i.a.createElement(i.a.Fragment,null),i.a.createElement(ea.a.Next,{onClick:function(e){return a.promeniStranicu(a.state.stranica+1)}}),i.a.createElement(ea.a.Last,{onClick:function(e){return a.promeniStranicu(a.state.zadnjaStranica)}}))),i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Prika\u017ei "),i.a.createElement(I.a.Control,{as:"select",value:this.state.brojZaPrikaz,onChange:this.pormenaBrojaZaPrikaz},this.state.opcije.map(function(a,e){return i.a.createElement("option",{key:e,value:a},a)}))))))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.loading?i.a.createElement(g.a,{animation:"border",variant:"primary"}):i.a.createElement(i.a.Fragment,null,!1===this.state.prikaziOpis?i.a.createElement(i.a.Fragment,null,0===parseInt(this.state.brojDogadjaja)?i.a.createElement(i.a.Fragment,null,i.a.createElement("b",null,"Broj doga\u0111aja:")," 0 ",i.a.createElement("br",null)):i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("b",null,"Broj doga\u0111aja:")," ",this.state.brojDogadjaja," ",i.a.createElement("br",null)),this.nacrtajDogadjaje(),this.nacrtajFooter())):i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,this.state.naslov),i.a.createElement("p",null,this.state.opis),i.a.createElement(k.a,{variant:"dark",type:"button",onClick:this.sakrijOpis},"Sakrij opis"))))}}]),e}(i.a.Component),ia=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={korisnik:{},loading:!0,prikaziDogadjaje:!1,email:"",cbxObavestenje:!0,emailValidacija:{potvrda:"",poruka:""},korisnickoIme:"",korisnickoImeValidacija:{potvrda:"",poruka:""},staraLozinka:"",staraLozinkaValidacija:{potvrda:"",poruka:""},lozinka:"",potvrdaLozinke:"",lozinkaValidacija:{potvrda:"",poruka:""},potvrdaLozinkeValidacija:{potvrda:"",poruka:""}},n.vratiProfil=n.vratiProfil.bind(Object(m.a)(Object(m.a)(n))),n.obradiOdgovor=n.obradiOdgovor.bind(Object(m.a)(Object(m.a)(n))),n.prikaziDogadjaje=n.prikaziDogadjaje.bind(Object(m.a)(Object(m.a)(n))),n.sacuvajPromene=n.sacuvajPromene.bind(Object(m.a)(Object(m.a)(n))),n.proveriEmail=n.proveriEmail.bind(Object(m.a)(Object(m.a)(n))),n.handleChange=n.handleChange.bind(Object(m.a)(Object(m.a)(n))),n.handleCbxChange=n.handleCbxChange.bind(Object(m.a)(Object(m.a)(n))),n.proveriKorisnickoIme=n.proveriKorisnickoIme.bind(Object(m.a)(Object(m.a)(n))),n.proveriLozinku=n.proveriLozinku.bind(Object(m.a)(Object(m.a)(n))),n.obradiPromenu=n.obradiPromenu.bind(Object(m.a)(Object(m.a)(n))),n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"handleCbxChange",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.checked))}},{key:"obradiPromenu",value:function(a){var e=this;"SESIJA_ISTEKLA"===a.Greska||"NIJE_PRIJAVLJEN"===a.Greska?this.props.logOut():(""!==a.Ime&&this.setState({korisnickoImeValidacija:{potvrda:!0,poruka:a.Ime.Poruka}}),""!==a.Email&&(!0===a.Email.EmailGreska?this.setState({emailValidacija:{potvrda:!1,poruka:a.Email.Poruka}}):this.setState({emailValidacija:{potvrda:!0,poruka:a.Email.Poruka}})),""!==a.Lozinka&&(!0===a.Lozinka.LozinkaGreska?this.setState({staraLozinkaValidacija:{potvrda:!1,poruka:a.Lozinka.Poruka}}):this.setState({staraLozinkaValidacija:{potvrda:!0,poruka:a.Lozinka.Poruka}})),this.setState({staraLozinka:""}),this.setState({lozinka:""}),this.setState({potvrdaLozinke:""},function(){return e.vratiProfil()}))}},{key:"handleChange",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.value))}},{key:"proveriEmail",value:function(){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.state.email)?(this.setState({emailValidacija:{potvrda:!0,poruka:""}}),!0):(this.setState({emailValidacija:{potvrda:!1,poruka:"Novi email koji ste uneli nije validan!"}}),!1)}},{key:"proveriKorisnickoIme",value:function(){return this.state.korisnickoIme.length<6?(this.setState({korisnickoImeValidacija:{potvrda:!1,poruka:"Korisnicko ime mora da ime najmanje 6 karaktera"}}),!1):(this.setState({korisnickoImeValidacija:{potvrda:!0,poruka:""}}),!0)}},{key:"sacuvajPromene",value:function(){var a,e=this,t=new FormData,n=!0,i=!1;if(""!==this.state.email&&this.state.email!==this.state.korisnik.email?this.proveriEmail()?(t.append("Email",this.state.email),i=!0):n=!1:this.setState({emailValidacija:{potvrda:"",poruka:""}}),""!==this.state.korisnickoIme&&this.state.korisnickoIme!==this.state.korisnik.username?this.proveriKorisnickoIme()?(i=!0,t.append("KorisnickoIme",this.state.korisnickoIme)):n=!1:this.setState({korisnickoImeValidacija:{potvrda:"",poruka:""}}),""!==this.state.staraLozinka?this.state.staraLozinka.length<6?(this.setState({staraLozinkaValidacija:{potvrda:!1,poruka:"Lozinka mora da ima bar 6 karaktera"}}),n=!1):this.proveriLozinku()?(t.append("StaraLozinka",this.state.staraLozinka),t.append("NovaLozinka",this.state.lozinka),i=!0):n=!1:this.setState({staraLozinkaValidacija:{potvrda:"",poruka:""}}),(a=!0===this.state.cbxObavestenje?"DA":"NE")!==this.state.korisnik.primajObavestenja&&(t.append("Obavestenje",a),i=!0),!0===n&&!0===i){t.append("promena",!0);var r={method:"post",body:t};this.setState({loading:!0}),fetch("./ThOr_php/Korisnik/promeniPodatke.php",r).then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(a){return e.obradiPromenu(a)}).catch(function(a){return console.log(a)})}}},{key:"prikaziDogadjaje",value:function(){this.setState({prikaziDogadjaje:!this.state.prikaziDogadjaje})}},{key:"componentDidMount",value:function(){this.vratiProfil()}},{key:"vratiProfil",value:function(){var a=this;fetch("./ThOr_php/Korisnik/vratiProfil.php").then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(e){return a.obradiOdgovor(e)}).catch(function(a){return console.log(a)})}},{key:"obradiOdgovor",value:function(a){var e=this;"NEMA"===a.Greska?this.setState({korisnik:a.Korisnik},function(){"DA"===e.state.korisnik.primajObavestenja?e.setState({cbxObavestenje:!0},function(){return e.setState({loading:!1})}):e.setState({cbxObavestenje:!1},function(){return e.setState({loading:!1})})}):this.props.logOut()}},{key:"proveriLozinku",value:function(){var a="lozinka mora da ima 6 karaktera, da se razlikuje od korisni\u010dkog imena i email-a, i da sadr\u017ei lowercase,uppercase i bar jedan numeri\u010dki karakter";if(this.state.lozinka.length<6)return this.setState({lozinkaValidacija:{potvrda:!1,poruka:a}}),!1;if(this.state.lozinka===this.state.email)return this.setState({lozinkaValidacija:{potvrda:!1,poruka:a}}),!1;if(this.state.lozinka===this.state.korisnickoIme)return this.setState({lozinkaValidacija:{potvrda:!1,poruka:a}}),!1;if(this.state.lozinka===this.state.staraLozinka)return this.setState({lozinkaValidacija:{potvrda:!1,poruka:"Nova lozinka treba da se razlikuje od stare"}}),!1;var e=/[0-9]/;return e.test(this.state.lozinka)&&(e=/[a-z]/).test(this.state.lozinka)&&(e=/[A-Z]/).test(this.state.lozinka)?this.state.lozinka!==this.state.potvrdaLozinke?(this.setState({lozinkaValidacija:{potvrda:!1,poruka:"lozinke se ne poklapaju"}}),this.setState({potvrdaLozinkeValidacija:{potvrda:!1,poruka:""}}),!1):(this.setState({lozinkaValidacija:{potvrda:!0,poruka:""}}),this.setState({potvrdaLozinkeValidacija:{potvrda:!0,poruka:""}}),!0):(this.setState({lozinkaValidacija:{potvrda:!1,poruka:a}}),!1)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.loading?i.a.createElement(g.a,{animation:"border",variant:"primary"}):i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,null,i.a.createElement(H.a,null,i.a.createElement(U.a,null,i.a.createElement(I.a.Group,{controlId:"formProfilNalogEmail"},i.a.createElement(I.a.Label,null,"Email adresa"),i.a.createElement(I.a.Control,{type:"email",placeholder:this.state.korisnik.email,name:"email",onChange:this.handleChange,isValid:!0===this.state.emailValidacija.potvrda,isInvalid:!1===this.state.emailValidacija.potvrda}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.emailValidacija.poruka),i.a.createElement(I.a.Control.Feedback,{type:"valid"},this.state.emailValidacija.poruka))),i.a.createElement(U.a,null,i.a.createElement(I.a.Group,{controlId:"formProfilNalogKorisnickoIme"},i.a.createElement(I.a.Label,null,"Korisnicko Ime"),i.a.createElement(I.a.Control,{type:"text",placeholder:this.state.korisnik.username,name:"korisnickoIme",onChange:this.handleChange,isValid:!0===this.state.korisnickoImeValidacija.potvrda,isInvalid:!1===this.state.korisnickoImeValidacija.potvrda}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.korisnickoImeValidacija.poruka),i.a.createElement(I.a.Control.Feedback,{type:"valid"},this.state.korisnickoImeValidacija.poruka),i.a.createElement(I.a.Text,{className:"text-muted"})))),i.a.createElement(I.a.Group,{controlId:"formProfilNalogStaraLozinka"},i.a.createElement(I.a.Label,null,"Stara Lozinka"),i.a.createElement(I.a.Control,{type:"password",placeholder:"Unesite staru lozinku",name:"staraLozinka",onChange:this.handleChange,isValid:!0===this.state.staraLozinkaValidacija.potvrda,isInvalid:!1===this.state.staraLozinkaValidacija.potvrda}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.staraLozinkaValidacija.poruka),i.a.createElement(I.a.Control.Feedback,{type:"valid"},this.state.staraLozinkaValidacija.poruka)),i.a.createElement(H.a,null,i.a.createElement(U.a,null,i.a.createElement(I.a.Group,{controlId:"formProfilNalogLozinka"},i.a.createElement(I.a.Label,null,"Nova Lozinka"),i.a.createElement(I.a.Control,{type:"password",placeholder:"Unesite novu lozinku",name:"lozinka",onChange:this.handleChange,isValid:!0===this.state.lozinkaValidacija.potvrda,isInvalid:!1===this.state.lozinkaValidacija.potvrda}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.lozinkaValidacija.poruka))),i.a.createElement(U.a,null,i.a.createElement(I.a.Group,{controlId:"formProfilNalogLozinkaPotvrda"},i.a.createElement(I.a.Label,null,"Potvrda Nove Lozinke"),i.a.createElement(I.a.Control,{type:"password",placeholder:"Potvrdite novu lozinku",name:"potvrdaLozinke",value:this.state.potvrdaLozinke,onChange:this.handleChange,isValid:!0===this.state.potvrdaLozinkeValidacija.potvrda,isInvalid:!1===this.state.potvrdaLozinkeValidacija.potvrda})))),i.a.createElement(I.a.Group,null,i.a.createElement("input",{type:"checkbox",name:"cbxObavestenje",checked:this.state.cbxObavestenje,onChange:this.handleCbxChange})," ","\u017delim obave\u0161tenja"),i.a.createElement(k.a,{variant:"outline-dark",type:"button",onClick:this.sacuvajPromene},"Sa\u010duvaj Promene")),i.a.createElement("hr",null),i.a.createElement(k.a,{variant:"outline-dark",type:"button",onClick:this.prikaziDogadjaje},this.state.prikaziDogadjaje?i.a.createElement(i.a.Fragment,null,"Sakrij Dogadjaje"):i.a.createElement(i.a.Fragment,null,"Prikazi Dogadjaje")),i.a.createElement("br",null),i.a.createElement("br",null),this.state.prikaziDogadjaje?i.a.createElement(na,{logOut:this.props.logOut,idKorisnika:!1}):i.a.createElement(i.a.Fragment,null)))}}]),e}(i.a.Component),ra=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={show:!1,izmeni:!1},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1})},n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"handleIzmeni",value:function(){var a=this.state.izmeni;this.setState({izmeni:!a})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Y.a.Link,{onClick:this.handleShow},"Profil ","  ",i.a.createElement("i",{className:"fas fa-user-circle"})),i.a.createElement(V.a,{size:"lg",show:this.state.show,onHide:this.handleHide,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title"},i.a.createElement(V.a.Header,{closeButton:!0},i.a.createElement(V.a.Title,{id:"ProfilKorisnikaModal"},"Profil")),i.a.createElement(V.a.Body,null,i.a.createElement(ia,{logOut:this.props.logOut}))))}}]),e}(i.a.Component),oa=t(126),sa=t(91),la=t(39),ca=(t(269),function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={show:!1,nazivSale:"sala1",rasporedSedista:"6,5,5,4,",zauzetaSedista:"00000000000000000000"},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1})},n.promenjenaSala=n.promenjenaSala.bind(Object(m.a)(Object(m.a)(n))),n.nacrtajCustomizaciju=n.nacrtajCustomizaciju.bind(Object(m.a)(Object(m.a)(n))),n.PodeliNaBrojKolona=n.PodeliNaBrojKolona.bind(Object(m.a)(Object(m.a)(n))),n.obaviUbacivanje=n.obaviUbacivanje.bind(Object(m.a)(Object(m.a)(n))),n.imeChange=n.imeChange.bind(Object(m.a)(Object(m.a)(n))),n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"obaviUbacivanje",value:function(){var a=new FormData;a.append("naziv",this.state.nazivSale),a.append("konfiguracija_mesta",this.state.rasporedSedista),a.append("default_zauzeta_sedista",this.state.zauzetaSedista),fetch("./ThOr_php/dodajSalu.php",{method:"POST",body:a}).then(function(a){if(!a.ok)throw new Error("fetch greska")}).catch(function(a){return console.log(a)}),this.handleHide()}},{key:"PodeliNaBrojKolona",value:function(a){var e=[],t=1,n=0,i=[],r=!0,o=!1,s=void 0;try{for(var l,c=a[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var d=l.value;if(","===d){for(var u=i.length-1;u>=0;u--)n+=i[u]*t,t*=10;i=[],e.push(n),t=1,n=0}else i.push(d)}}catch(m){o=!0,s=m}finally{try{r||null==c.return||c.return()}finally{if(o)throw s}}return e}},{key:"promenjenaSala",value:function(){var a=document.getElementById("FormatSaleInput").value;a+=",";var e=this.PodeliNaBrojKolona(a),t=0,n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t+=parseInt(l)}}catch(u){i=!0,r=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}for(var c="",d=0;d<t;d++)c+="0";this.setState({rasporedSedista:a,zauzetaSedista:c})}},{key:"imeChange",value:function(a){this.setState({nazivSale:a.target.value})}},{key:"nacrtajCustomizaciju",value:function(){return i.a.createElement("div",{className:"salaCustomization"},i.a.createElement("div",null,i.a.createElement(I.a,null,i.a.createElement(I.a.Group,{controlId:"exampleForm.ControlInput1"},i.a.createElement(I.a.Label,null,"Naziv sale"),i.a.createElement(I.a.Control,{onChange:this.imeChange,type:"imeSale",placeholder:"Glavna sala"})),i.a.createElement(I.a.Label,null,"Uneti format sale"),i.a.createElement(oa.a,{className:"mb-3"},i.a.createElement(sa.a,{id:"FormatSaleInput",placeholder:"primer formata pri cemu svaki broj predstavlja koliko sedista ima u jednoj vrsti : 6,5,5,4"}),i.a.createElement(oa.a.Append,null,i.a.createElement(k.a,{variant:"outline-success",onClick:this.promenjenaSala},"Generi\u0161i salu"))))),i.a.createElement("h4",{className:"PreviewTekstSala"}," Preview sale "),i.a.createElement("div",{className:"SalaPreview"},i.a.createElement(f,{key:this.state.rasporedSedista,rasporedSedista:this.state.rasporedSedista,zauzetaSedista:this.state.zauzetaSedista})),i.a.createElement("div",null),i.a.createElement("div",{className:"btnSacuvajSalu"},i.a.createElement(k.a,{variant:"outline-success",id:"dugmeSacuvajSalu",onClick:this.obaviUbacivanje},"Sa\u010duvaj salu")))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(la.a.Item,{onClick:this.handleShow},"Nova Sala"),i.a.createElement(V.a,{size:"xl",show:this.state.show,onHide:this.handleHide,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title"},i.a.createElement(V.a.Header,{closeButton:!0},i.a.createElement(V.a.Title,{id:"example-custom-modal-styling-title"},"Nova sala")),i.a.createElement(V.a.Body,null,this.nacrtajCustomizaciju())))}}]),e}(i.a.Component)),da=t(172),ua=(t(270),function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={show:n.props.show},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1}),n.props.hide()},n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{centered:"true",show:this.state.show,onHide:this.handleHide,className:"modalExtendedDogadjaj",size:"xl"},i.a.createElement(V.a.Header,{closeButton:!0},i.a.createElement(V.a.Title,{className:"title",id:"example-custom-modal-styling-title"},this.props.dogadjaj.naziv)),i.a.createElement(V.a.Body,null,i.a.createElement(F,{guest:this.props.guest,administrator:this.props.administrator,tabela:!0,idDogadjaja:this.props.dogadjaj.id,slika:this.props.dogadjaj.url_slike,naslov:this.props.dogadjaj.naziv,opis:this.props.dogadjaj.opis,datum:this.props.dogadjaj.datum_pocetka,duzina_trajanja:this.props.dogadjaj.duzina_trajanja,cena:this.props.dogadjaj.cena,ocena_dogadjaja:this.props.dogadjaj.prosecnaOcena,vreme_odrzavanja:this.props.dogadjaj.vreme_odrzavanja,aktivan:this.props.dogadjaj.aktivan,promeniAktivnost:this.props.promeniAktivnost,logOut:this.props.logOut}))))}}]),e}(i.a.Component)),ma=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={stranica:1,brojZaPrikaz:5,dogadjaji:[],brojDogadjaja:!1,zadnjaStranica:0,loading:!0,opcije:[],open:!1,filterCenaOd:0,filterCenaDo:Number.MAX_SAFE_INTEGER,filterCenaValidacija:{potvrda:"",poruka:""},filterDatumValidacija:{potvrda:"",poruka:""},filterDatumOd:"",filterDatumDo:"",filterUpaljen:!1,dogadjaj:{},prikaziDetaljnoDogadjaj:!1},n.nacrtajStranicenje=n.nacrtajStranicenje.bind(Object(m.a)(Object(m.a)(n))),n.promeniStranicu=n.promeniStranicu.bind(Object(m.a)(Object(m.a)(n))),n.vratiDogadjaje=n.vratiDogadjaje.bind(Object(m.a)(Object(m.a)(n))),n.pormenaBrojaZaPrikaz=n.pormenaBrojaZaPrikaz.bind(Object(m.a)(Object(m.a)(n))),n.nacrtajFiltere=n.nacrtajFiltere.bind(Object(m.a)(Object(m.a)(n))),n.obradiFilter=n.obradiFilter.bind(Object(m.a)(Object(m.a)(n))),n.handleChange=n.handleChange.bind(Object(m.a)(Object(m.a)(n))),n.nacrtajDetaljeDogadjaja=n.nacrtajDetaljeDogadjaja.bind(Object(m.a)(Object(m.a)(n))),n.sakrijDetalje=n.sakrijDetalje.bind(Object(m.a)(Object(m.a)(n))),n.promeniAktivnost=n.promeniAktivnost.bind(Object(m.a)(Object(m.a)(n))),n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"promeniAktivnost",value:function(a){var e=Object(da.a)({},this.state.dogadjaj);e.aktivan=a,this.setState({dogadjaj:e}),this.props.refreshRepertoar()}},{key:"sakrijDetalje",value:function(){this.setState({prikaziDetaljnoDogadjaj:!1})}},{key:"nacrtajDetaljeDogadjaja",value:function(a){var e=this;this.setState({dogadjaj:a},function(){return e.setState({prikaziDetaljnoDogadjaj:!0})})}},{key:"obradiFilter",value:function(){var a=this,e=!0,t=this.state.filterCenaOd,n=this.state.filterCenaDo,i=this.state.filterDatumOd,r=this.state.filterDatumDo,o=new Date(this.state.filterDatumOd),s=new Date(this.state.filterDatumDo);""===n&&(n=Number.MAX_SAFE_INTEGER),""===t&&(t=0),parseInt(t)>parseInt(n)?(e=!1,this.setState({filterCenaValidacija:{potvrda:!1,poruka:"Pocetna cena mora biti manja od krajnje cene"}})):this.setState({filterCenaValidacija:{potvrda:"",poruka:"sve okej"}}),isNaN(o.getTime())&&(i="1900-01-01"),isNaN(s.getTime())&&(r="9999-01-01"),o>s?(e=!1,this.setState({filterDatumValidacija:{potvrda:!1,poruka:"Pocetni datum  mora biti raniji od krajnjeg"}})):this.setState({filterDatumValidacija:{potvrda:"",poruka:""}}),!0===e&&this.setState({filterCenaOd:t},function(){return a.setState({filterCenaDo:n},function(){return a.setState({filterDatumOd:i},function(){return a.setState({filterDatumDo:r},function(){return a.setState({filterUpaljen:!0},function(){return a.setState({stranica:1},function(){return a.vratiDogadjaje(a.state.stranica)})})})})})})}},{key:"handleChange",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.value))}},{key:"nacrtajFiltere",value:function(){var a=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Z.a,{fluid:"true"},i.a.createElement(U.a,{className:"search"},i.a.createElement("i",{className:"fas fa-search",onClick:function(){return a.setState({open:!a.state.open})},"aria-controls":"example-collapse-text","aria-expanded":this.state.open}))),i.a.createElement(O.a,{in:this.state.open},i.a.createElement(I.a,null,i.a.createElement(I.a.Row,{className:"filteri"},i.a.createElement("div",{className:"tabelaUnos"},i.a.createElement("div",null,i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Opseg cene "),i.a.createElement(I.a.Control,{name:"filterCenaOd",type:"number",isInvalid:!1===this.state.filterCenaValidacija.potvrda,placeholder:"Pocetna cena",onChange:this.handleChange}),i.a.createElement(I.a.Control,{name:"filterCenaDo",type:"number",isInvalid:!1===this.state.filterCenaValidacija.potvrda,placeholder:"Krajnja cena",onChange:this.handleChange}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.filterCenaValidacija.poruka))),i.a.createElement("div",null,i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Opseg Datuma"),i.a.createElement(I.a.Control,{name:"filterDatumOd",type:"date",placeholder:"Pocetni datum",isInvalid:!1===this.state.filterDatumValidacija.potvrda,onChange:this.handleChange}),i.a.createElement(I.a.Control,{name:"filterDatumDo",type:"date",placeholder:"Krajnji datum",isInvalid:!1===this.state.filterDatumValidacija.potvrda,onChange:this.handleChange}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.filterDatumValidacija.poruka)))),i.a.createElement("div",{className:"tabelaDugme"},i.a.createElement(I.a.Group,null,i.a.createElement(k.a,{variant:"outline-secondary",onClick:this.obradiFilter},"Filtriraj")))))))}},{key:"componentDidMount",value:function(){for(var a=[],e=5;e<=25;e+=5)a.push(e);this.setState({opcije:a}),this.vratiDogadjaje(this.state.stranica)}},{key:"pormenaBrojaZaPrikaz",value:function(a){var e=this;this.setState({stranica:1},this.setState({brojZaPrikaz:a.target.value},function(){return e.setState({zadnjaStranica:Math.ceil(e.state.brojDogadjaja/e.state.brojZaPrikaz)},function(){e.setState({loading:!0},function(){return e.vratiDogadjaje(e.state.stranica)})})}))}},{key:"promeniStranicu",value:function(a){!isNaN(a)&&a>0&&a<=this.state.zadnjaStranica&&a!==this.state.stranica&&(this.setState({stranica:a}),this.setState({loading:!0}),this.vratiDogadjaje(a))}},{key:"vratiDogadjaje",value:function(a){var e=this;this.setState({loading:!0});var t=new FormData;t.append("stranica",a),t.append("brojDogadjaja",this.state.brojZaPrikaz),!0===this.state.filterUpaljen&&(t.append("minCena",this.state.filterCenaOd),t.append("maxCena",this.state.filterCenaDo),t.append("DatumOd",this.state.filterDatumOd),t.append("DatumDo",this.state.filterDatumDo),t.append("vratiMax",0)),!1===this.state.brojDogadjaja&&t.append("vratiMax",0),fetch("./ThOr_php/vratiStranicuDogadjaja.php",{method:"post",body:t}).then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(a){return e.obradiOdgovor(a)}).catch(function(a){return console.log(a)})}},{key:"obradiOdgovor",value:function(a){var e=this;"NEMA"===a.Greska?(this.setState({dogadjaji:a.Dogadjaji},function(){return e.setState({loading:!1})}),!1===this.state.brojDogadjaja&&this.setState({brojDogadjaja:a.Ukupno},function(){return e.setState({zadnjaStranica:Math.ceil(e.state.brojDogadjaja/e.state.brojZaPrikaz)})}),""!==a.Filter&&this.setState({brojDogadjaja:a.Ukupno},function(){return e.setState({zadnjaStranica:Math.ceil(e.state.brojDogadjaja/e.state.brojZaPrikaz)})})):"NISTE_ADMIN"===a.Greska?alert("Nemate autorizaciju"):(this.props.logOut(),alert(a.Greska)),this.setState({loading:!1})}},{key:"nacrtajDogadjaje",value:function(){var a=this;return i.a.createElement(i.a.Fragment,null,!0===this.state.loading?i.a.createElement(g.a,{animation:"border",variant:"primary"}):i.a.createElement(ta.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Naziv"),i.a.createElement("th",null,"Datum"),i.a.createElement("th",null,"Cena"),i.a.createElement("th",{className:"thDetalji"},"Detaljno"))),i.a.createElement("tbody",null,!1!==this.state.brojDogadjaja&&0!==this.state.brojDogadjaja?this.state.dogadjaji.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t+1+(a.state.stranica-1)*a.state.brojZaPrikaz),i.a.createElement("td",null,e.naziv),i.a.createElement("td",null,e.datum_pocetka),i.a.createElement("td",null,e.cena),i.a.createElement("td",{className:"prikaziDetalje"},i.a.createElement(y.a,{placement:"right",overlay:i.a.createElement(C.a,{id:"tooltip-disabled"},"Prikazi informacije")},i.a.createElement("i",{className:"fas fa-theater-masks fa-2x",onClick:function(){return a.nacrtajDetaljeDogadjaja(e)}}))))}):i.a.createElement(i.a.Fragment,null))))}},{key:"nacrtajStranicenje",value:function(){var a=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,null,i.a.createElement(I.a.Row,{className:"footerKorisnici"},i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Stranica"),i.a.createElement(ea.a,null,i.a.createElement(ea.a.First,{onClick:function(e){return a.promeniStranicu(1)}}),i.a.createElement(ea.a.Prev,{onClick:function(e){return a.promeniStranicu(a.state.stranica-1)}}),this.state.stranica>1?i.a.createElement(ea.a.Item,{onClick:function(e){return a.promeniStranicu(a.state.stranica-1)}},this.state.stranica-1):i.a.createElement(i.a.Fragment,null),i.a.createElement(ea.a.Item,{active:!0},this.state.stranica),this.state.stranica<this.state.zadnjaStranica?i.a.createElement(ea.a.Item,{onClick:function(e){return a.promeniStranicu(a.state.stranica+1)}},this.state.stranica+1):i.a.createElement(i.a.Fragment,null),i.a.createElement(ea.a.Next,{onClick:function(e){return a.promeniStranicu(a.state.stranica+1)}}),i.a.createElement(ea.a.Last,{onClick:function(e){return a.promeniStranicu(a.state.zadnjaStranica)}}))),i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Prikazi "),i.a.createElement(I.a.Control,{as:"select",value:this.state.brojZaPrikaz,onChange:this.pormenaBrojaZaPrikaz},this.state.opcije.map(function(a,e){return i.a.createElement("option",{key:e,value:a},a)}))))))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.nacrtajFiltere(),this.nacrtajDogadjaje(),this.nacrtajStranicenje(),!0===this.state.prikaziDetaljnoDogadjaj?i.a.createElement(ua,{show:!0,logOut:this.props.logOut,promeniAktivnost:this.promeniAktivnost,hide:this.sakrijDetalje,dogadjaj:this.state.dogadjaj}):i.a.createElement(i.a.Fragment,null))}}]),e}(i.a.Component),ha=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={show:!1},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1})},n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(la.a.Item,{onClick:this.handleShow},"Pregled Doga\u0111aja"),i.a.createElement(V.a,{size:"lg",show:this.state.show,onHide:this.handleHide,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title"},i.a.createElement(V.a.Header,{closeButton:!0},i.a.createElement(V.a.Title,{id:"BanujModal"},"Dogadjaji")),i.a.createElement(V.a.Body,null,i.a.createElement(ma,{refreshRepertoar:this.props.refreshRepertoar,guest:this.props.guest,administrator:this.props.administrator,logOut:this.props.logOut}))))}}]),e}(i.a.Component),pa=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={show:n.props.show,korisnik:"",prikaziSuspenziju:!1,datumValidacija:{potvrda:"",poruka:""},datumOd:"",datumDo:"",suspenzije:[],loader:!1,ucitanaSuspenzija:!1},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1}),n.props.sakrijDetalje()},n.crtaj=n.crtaj.bind(Object(m.a)(Object(m.a)(n))),n.handleChange=n.handleChange.bind(Object(m.a)(Object(m.a)(n))),n.suspenduj=n.suspenduj.bind(Object(m.a)(Object(m.a)(n))),n.obradiOdgovor=n.obradiOdgovor.bind(Object(m.a)(Object(m.a)(n))),n.vratiSuspenziju=n.vratiSuspenziju.bind(Object(m.a)(Object(m.a)(n))),n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"vratiSuspenziju",value:function(){var a=this,e=new FormData;e.append("idKorisnika",this.state.korisnik.id),fetch("./ThOr_php/vratiSuspenziju.php",{method:"post",body:e}).then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(e){"Nema"===e.Greska?a.setState({suspenzije:e.Datum,ucitanaSuspenzija:!0}):(alert(e.Greska),a.props.logOut())}).catch(function(a){return console.log(a)})}},{key:"obradiOdgovor",value:function(a){"Nema"===a.Greska?(this.vratiSuspenziju(),this.setState({loader:!1}),this.setState({prikaziSuspenziju:!1})):(alert(a.Greska),this.props.logOut())}},{key:"suspenduj",value:function(){var a=this,e=new Date(this.state.datumOd),t=new Date(this.state.datumDo),n=!0;if(isNaN(e.getTime())&&(this.setState({datumValidacija:{potvrda:!1,poruka:"Nije validan datum"}}),n=!1),isNaN(t.getTime())&&(this.setState({datumValidacija:{potvrda:!1,poruka:"Nije validan datum"}}),n=!1),e>t?(n=!1,this.setState({datumValidacija:{potvrda:!1,poruka:"Pocetni datum  mora biti raniji od krajnjeg"}})):this.setState({filterDatumValidacija:{potvrda:"",poruka:""}}),!0===n){this.setState({loader:!0});var i=new FormData;i.append("idKorisnika",this.state.korisnik.id),i.append("datumOd",this.state.datumOd),i.append("datumDo",this.state.datumDo),fetch("./ThOr_php/suspendujKorisnika.php",{method:"post",body:i}).then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(e){return a.obradiOdgovor(e)}).catch(function(a){return console.log(a)})}}},{key:"handleChange",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.value))}},{key:"componentDidMount",value:function(){var a=this;this.setState({korisnik:this.props.korisnik},function(){return a.vratiSuspenziju()})}},{key:"crtaj",value:function(){return isNaN(this.state.korisnik.id)?i.a.createElement(i.a.Fragment,null,"Greska"):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"suspenzija"},i.a.createElement("div",{className:"suspenzijaPodaci"},i.a.createElement("label",null,i.a.createElement("b",null,"E-mail korisnika:"),i.a.createElement("br",null),this.state.korisnik.email),!0===this.state.ucitanaSuspenzija?i.a.createElement("label",null,i.a.createElement("b",null,"Suspenzije:"),i.a.createElement("br",null),0===this.state.suspenzije.length?i.a.createElement(i.a.Fragment,null,"Korisnik nije bio suspendovan"):this.state.suspenzije.map(function(a,e){return i.a.createElement("div",{key:a.Id},"Od: "+a.Od+" Do:"+a.Do)})):i.a.createElement(i.a.Fragment,null))),!0===this.state.prikaziSuspenziju?i.a.createElement(i.a.Fragment,null,!0===this.state.loader?i.a.createElement(i.a.Fragment,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,null,i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Pocetak Suspenzije"),i.a.createElement(I.a.Control,{name:"datumOd",type:"date",placeholder:"Pocetni datum",isInvalid:!1===this.state.datumValidacija.potvrda,onChange:this.handleChange}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"})),i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Kraj Suspenzije"),i.a.createElement(I.a.Control,{name:"datumDo",type:"date",placeholder:"Krajnji datum",isInvalid:!1===this.state.datumValidacija.potvrda,onChange:this.handleChange}),i.a.createElement(I.a.Control.Feedback,{type:"invalid"},this.state.datumValidacija.poruka))),i.a.createElement(k.a,{variant:"outline-danger",type:"button",onClick:this.suspenduj},"Suspenduj"))):i.a.createElement(i.a.Fragment,null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(na,{logOut:this.props.logOut,idKorisnika:this.state.korisnik.id}))}},{key:"render",value:function(){var a=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{size:"lg",show:this.state.show,onHide:this.handleHide,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title"},i.a.createElement(V.a.Header,{className:"suspenudjModal"},i.a.createElement(V.a.Title,{id:"ProfilKorisnikaModal"},i.a.createElement("div",null,"Profil: ",this.state.korisnik.username),i.a.createElement(k.a,{variant:"outline-danger",type:"button",onClick:function(){return a.setState({prikaziSuspenziju:!a.state.prikaziSuspenziju})}},!0===this.state.loader?i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{animation:"border",variant:"primary"})," Loading..."):i.a.createElement(i.a.Fragment,null," Suspenduj Korisnika")))),i.a.createElement(V.a.Body,null,this.crtaj())))}}]),e}(i.a.Component),ja=(t(271),function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={stranica:1,brojZaPrikaz:5,korisnici:[],brojKorisnika:0,zadnjaStranica:0,loading:!0,opcije:[],prikaziDetalje:!1,KorisnikExtended:{}},n.nacrtajKorisnike=n.nacrtajKorisnike.bind(Object(m.a)(Object(m.a)(n))),n.vratiKorisnike=n.vratiKorisnike.bind(Object(m.a)(Object(m.a)(n))),n.obradiOdgovor=n.obradiOdgovor.bind(Object(m.a)(Object(m.a)(n))),n.promeniStranicu=n.promeniStranicu.bind(Object(m.a)(Object(m.a)(n))),n.nacrtajFooter=n.nacrtajFooter.bind(Object(m.a)(Object(m.a)(n))),n.pormenaBrojaZaPrikaz=n.pormenaBrojaZaPrikaz.bind(Object(m.a)(Object(m.a)(n))),n.vratiBrojKorisnika=n.vratiBrojKorisnika.bind(Object(m.a)(Object(m.a)(n))),n.prikaziDetalje=n.prikaziDetalje.bind(Object(m.a)(Object(m.a)(n))),n.sakrijDetalje=n.sakrijDetalje.bind(Object(m.a)(Object(m.a)(n))),n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"prikaziDetalje",value:function(a){this.setState({prikaziDetalje:!0}),this.setState({KorisnikExtended:a})}},{key:"sakrijDetalje",value:function(){this.setState({prikaziDetalje:!1})}},{key:"vratiBrojKorisnika",value:function(){var a=this;fetch("./ThOr_php/vratiBrojKorisnika.php").then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(e){"NEMA"===e.Greska?a.setState({brojKorisnika:e.Broj},function(){return a.setState({zadnjaStranica:Math.ceil(a.state.brojKorisnika/a.state.brojZaPrikaz)})}):"NISTE_ADMIN"===e.Greska?alert("Niste admin"):(alert(e.Greska),a.props.logOut())}).catch(function(a){return console.log(a)})}},{key:"pormenaBrojaZaPrikaz",value:function(a){var e=this;this.setState({stranica:1},this.setState({brojZaPrikaz:a.target.value},function(){return e.setState({zadnjaStranica:Math.ceil(e.state.brojKorisnika/e.state.brojZaPrikaz)},function(){e.setState({loading:!0},function(){return e.vratiKorisnike(e.state.stranica)})})}))}},{key:"componentDidMount",value:function(){for(var a=[],e=5;e<=25;e+=5)a.push(e);this.setState({opcije:a}),this.vratiBrojKorisnika(),this.vratiKorisnike(this.state.stranica)}},{key:"promeniStranicu",value:function(a){!isNaN(a)&&a>0&&a<=this.state.zadnjaStranica&&(this.setState({stranica:a}),this.setState({loading:!0}),this.vratiKorisnike(a))}},{key:"vratiKorisnike",value:function(a){var e=this,t=new FormData;t.append("stranica",a),t.append("brojKorisnika",this.state.brojZaPrikaz),fetch("./ThOr_php/vratiKorisnike.php",{method:"post",body:t}).then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(a){return e.obradiOdgovor(a)}).catch(function(a){return console.log(a)})}},{key:"obradiOdgovor",value:function(a){var e=this;"NEMA"===a.Greska?this.setState({korisnici:a.Korisnici},function(){return e.setState({loading:!1})}):(alert(a.Greska),this.props.logOut())}},{key:"nacrtajKorisnike",value:function(){var a=this;return i.a.createElement(i.a.Fragment,null,!0===this.state.loading?i.a.createElement(g.a,{animation:"border",variant:"dark"}):i.a.createElement(ta.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Email"),i.a.createElement("th",null,"Korisnicko Ime"),i.a.createElement("th",{className:"thDetalji"},"Detalji"))),i.a.createElement("tbody",null,0!==this.state.brojKorisnika?this.state.korisnici.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t+1+(a.state.stranica-1)*a.state.brojZaPrikaz),i.a.createElement("td",null,e.email),i.a.createElement("td",null,e.username),i.a.createElement("td",{className:"prikaziDetalje"},i.a.createElement(y.a,{placement:"right",overlay:i.a.createElement(C.a,{id:"tooltip-disabled"},"Prikazi informacije")},i.a.createElement("i",{className:"far fa-address-card fa-2x",onClick:function(){return a.prikaziDetalje(e)}}))))}):i.a.createElement(i.a.Fragment,null))))}},{key:"nacrtajFooter",value:function(){var a=this;return i.a.createElement(i.a.Fragment,null," ",!0===this.state.loading?i.a.createElement(i.a.Fragment,null):i.a.createElement(I.a,null,i.a.createElement(I.a.Row,{className:"footerKorisnici"},i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Stranica"),i.a.createElement(ea.a,null,i.a.createElement(ea.a.First,{onClick:function(e){return a.promeniStranicu(1)}}),i.a.createElement(ea.a.Prev,{onClick:function(e){return a.promeniStranicu(a.state.stranica-1)}}),this.state.stranica>1?i.a.createElement(ea.a.Item,{onClick:function(e){return a.promeniStranicu(a.state.stranica-1)}},this.state.stranica-1):i.a.createElement(i.a.Fragment,null),i.a.createElement(ea.a.Item,{active:!0},this.state.stranica),this.state.stranica<this.state.zadnjaStranica?i.a.createElement(ea.a.Item,{onClick:function(e){return a.promeniStranicu(a.state.stranica+1)}},this.state.stranica+1):i.a.createElement(i.a.Fragment,null),i.a.createElement(ea.a.Next,{onClick:function(e){return a.promeniStranicu(a.state.stranica+1)}}),i.a.createElement(ea.a.Last,{onClick:function(e){return a.promeniStranicu(a.state.zadnjaStranica)}}))),i.a.createElement(I.a.Group,null,i.a.createElement(I.a.Label,null,"Prikazi "),i.a.createElement(I.a.Control,{as:"select",variant:"dark",value:this.state.brojZaPrikaz,onChange:this.pormenaBrojaZaPrikaz},this.state.opcije.map(function(a,e){return i.a.createElement("option",{key:e,value:a},a)}))))))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!1===this.state.prikaziDetalje?i.a.createElement(i.a.Fragment,null," ",this.nacrtajKorisnike(),this.nacrtajFooter()):i.a.createElement(i.a.Fragment,null,i.a.createElement(pa,{show:!0,sakrijDetalje:this.sakrijDetalje,korisnik:this.state.KorisnikExtended,logOut:this.props.logOut})))}}]),e}(i.a.Component)),ka=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={show:!1},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1})},n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(la.a.Item,{onClick:this.handleShow},"Korisnici"),i.a.createElement(V.a,{size:"lg",show:this.state.show,onHide:this.handleHide,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title"},i.a.createElement(V.a.Header,{closeButton:!0},i.a.createElement(V.a.Title,{id:"KorisniciModal"},"Korisnici")),i.a.createElement(V.a.Body,null,i.a.createElement(ja,{logOut:this.props.logOut,show:this.handleShow,hide:this.handleHide}))))}}]),e}(i.a.Component),va=function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).state={naslov:"",sadrzaj:"",loading:!1},t.posaljiMejl=t.posaljiMejl.bind(Object(m.a)(Object(m.a)(t))),t.handleChange=t.handleChange.bind(Object(m.a)(Object(m.a)(t))),t.obradiOdgovor=t.obradiOdgovor.bind(Object(m.a)(Object(m.a)(t))),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"posaljiMejl",value:function(){var a=this;this.setState({loading:!0});var e=new FormData;e.append("naslov",this.state.naslov),e.append("sadrzaj",this.state.sadrzaj),fetch("./ThOr_php/posaljiObavestenje",{method:"post",body:e}).then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(e){return a.obradiOdgovor(e)}).catch(function(a){return console.log(a)}),this.props.hide()}},{key:"obradiOdgovor",value:function(a){"NEMA"===a.Greska?(console.log("Obavestenje je poslato"),this.setState({loading:!1})):"NISTE_ADMIN"===a.Greska||"SESIJA_ISTEKLA"===a.Greska||"NIJE_PRIJAVLJEN"===a.Greska?(alert(a.Greska),this.props.logOut()):console.log("Doslo je do greske pri slanju obavestanja")}},{key:"handleChange",value:function(a){this.setState(Object(h.a)({},a.target.name,a.target.value))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!0===this.state.loading?i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{animation:"border",variant:"primary"})):i.a.createElement(I.a,null,i.a.createElement(I.a.Group,{controlId:"mailForm.Subject"},i.a.createElement(I.a.Label,null,"Naslov"),i.a.createElement(I.a.Control,{onChange:this.handleChange,name:"naslov",type:"text",placeholder:"naslov"})),i.a.createElement(I.a.Group,{controlId:"mailForm.Content"},i.a.createElement(I.a.Label,null,"Sadr\u017eaj"),i.a.createElement(I.a.Control,{onChange:this.handleChange,name:"sadrzaj",as:"textarea",rows:"10",placeholder:"..."})),i.a.createElement(k.a,{variant:"dark",type:"button",onClick:this.posaljiMejl},"Po\u0161alji")))}}]),e}(i.a.Component),ba=function(a){function e(a,t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,a,t))).state={show:!1},n.handleShow=function(){n.setState({show:!0})},n.handleHide=function(){n.setState({show:!1})},n}return Object(u.a)(e,a),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(la.a.Item,{onClick:this.handleShow},"Po\u0161alji Obave\u0161tenje"),i.a.createElement(V.a,{size:"lg",show:this.state.show,onHide:this.handleHide,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title"},i.a.createElement(V.a.Header,{closeButton:!0},i.a.createElement(V.a.Title,{id:"ObavestenjeModal"},"Obave\u0161tenje")),i.a.createElement(V.a.Body,null,i.a.createElement(va,{hide:this.handleHide,logOut:this.props.logOut}))))}}]),e}(i.a.Component),ga=function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,a))).state={isScrolled:!1,guest:!1,administrator:!0,refreshRepertoar:!0},t.handleLogInClicked=t.handleLogInClicked.bind(Object(m.a)(Object(m.a)(t))),t.handleScroll=t.handleScroll.bind(Object(m.a)(Object(m.a)(t))),t.handleLogOut=t.handleLogOut.bind(Object(m.a)(Object(m.a)(t))),t.podesiStanje=t.podesiStanje.bind(Object(m.a)(Object(m.a)(t))),t.refreshRepertoar=t.refreshRepertoar.bind(Object(m.a)(Object(m.a)(t))),t.podesiStanje(),t}return Object(u.a)(e,a),Object(l.a)(e,[{key:"refreshRepertoar",value:function(){this.setState({refreshRepertoar:!this.state.refreshRepertoar})}},{key:"podesiStanje",value:function(){var a=this;fetch("./ThOr_php/proveriPrijavu.php").then(function(a){if(a.ok)return a.json();throw new Error(a.statusText)}).then(function(e){a.setState({guest:e.Guest,administrator:e.Admin})}).catch(function(a){return console.log(a)})}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){window.scrollY>=50?this.setState({isScrolled:!0}):this.setState({isScrolled:!1})}},{key:"handleLogInClicked",value:function(a){var e=a;this.setState({guest:!1,administrator:e})}},{key:"handleLogOut",value:function(){fetch("./ThOr_php/odjava.php").then(function(a){if(!a.ok)throw new Error(a.statusText);return!0}).catch(function(a){return console.log(a)}),this.setState({guest:!0,administrator:!1})}},{key:"nacrtajAlatke",value:function(){return i.a.createElement(la.a,{title:"Alati",id:"dropDownAlatke",variant:"dark"},i.a.createElement(ca,null),i.a.createElement(ka,{logOut:this.handleLogOut}),i.a.createElement(ha,{guest:this.state.guest,administrator:this.state.administrator,refreshRepertoar:this.refreshRepertoar,logOut:this.handleLogOut}),i.a.createElement(ba,{logOut:this.handleLogOut}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(Q.a,{header:i.a.createElement(i.a.Fragment,null,i.a.createElement(X.a,{className:this.state.isScrolled?"glavniNavbarScrolled":"glavniNavbar",bg:"dark",variant:"dark",expand:"md"},i.a.createElement(X.a.Brand,{href:"#Home"},i.a.createElement("i",{className:"fas fa-theater-masks"}))," ",i.a.createElement(X.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),i.a.createElement(X.a.Collapse,{id:"responsive-navbar-nav"},i.a.createElement(Y.a,{className:"mr-auto"},i.a.createElement(Y.a.Link,{href:"#Home"},"Po\u010detak"),i.a.createElement(Y.a.Link,{href:"#Repertoar"},"Reperotar"),i.a.createElement(Y.a.Link,{href:"#Lokacija"},"Lokacija"),this.state.administrator?this.nacrtajAlatke():i.a.createElement(i.a.Fragment,null)),i.a.createElement(Y.a,null,this.state.guest?i.a.createElement(i.a.Fragment,null,i.a.createElement(W,{loginState:this.handleLogInClicked}),i.a.createElement(aa,{loginState:this.handleLogInClicked})):i.a.createElement(i.a.Fragment,null,i.a.createElement(Y.a.Link,{variant:"dark",onClick:this.handleLogOut},"Odjavi se"),i.a.createElement(ra,{logOut:this.handleLogOut}))))))}),i.a.createElement(J,{refreshRepertoar:this.state.refreshRepertoar,loginState:this.handleLogInClicked,logOut:this.handleLogOut,guest:this.state.guest,administrator:this.state.administrator}))}}]),e}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(ga,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(a){a.unregister()})},98:function(a,e,t){}},[[176,1,2]]]);
//# sourceMappingURL=main.0bdac705.chunk.js.map